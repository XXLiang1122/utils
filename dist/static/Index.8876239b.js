var t=Object.assign;import{_ as e}from"./Wrapper.30c6c947.js";import{d as n,r as i,t as a,p as l,a as d,b as o,o as s,c as r,w as c,e as g,f,v as p,F as h,g as b,h as m,i as x}from"./index.81a38c2f.js";let u={};const v=()=>`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1,user-scalable=no">\n      <title>${u.title||"标题"}</title>\n      <style>\n        html {\n          font-size: calc(100vw/3.75);\n          -webkit-text-size-adjust: 100%;\n        }\n        body {\n          width: 100%;\n          margin: 0;\n          overflow: auto;\n        }\n        img {\n          position: relative;\n          z-index: -1;\n          display: block;\n          width: 100%;\n        }\n        .btn {\n          position: absolute;\n        }\n        .fixed-btn {\n          position: fixed;\n        }\n      </style>\n    </head>\n    <body>\n    <img src="${u.image}">\n    ${w()}\n    ${A()}\n    </body>\n    </html>`,w=()=>{let t="";return u.btn.forEach((e=>{t+=`<a href="${e.link}"><div class="btn" style="width: ${e.width}; height: ${e.height}; top: ${e.top}; left: ${e.left}; display: ${e.width?"block":"none"}"></div></a>`})),t},A=()=>{let t="";return u.fixedbtn.forEach((e=>{t+=`<a href="${e.link}"><div class="fixed-btn" style="width: ${e.width}; height: ${e.height}; top: ${e.top}; left: ${e.left}; display: ${e.width?"block":"none"}"></div></a>`})),t},y={link:"",width:"140",height:"40",top:0,left:0};var k=n({name:"SimpleH5",components:{Wrapper:e},setup:()=>{const e=i({config:{title:"",image:"",btn:[],fixedbtn:[]}});let n=0,l=0,d=0,o=!1;const s=()=>{const t=JSON.parse(JSON.stringify(e.config));return t.btn.map((t=>{t.width=t.width/100+"rem",t.height=t.height/100+"rem",t.top=t.top/100+"rem",t.left=t.left/100+"rem"})),t.fixedbtn.map((t=>{t.width=t.width/100+"rem",t.height=t.height/100+"rem",t.top=t.top/100+"rem",t.left=t.left/100+"rem"})),t},r=(t,e)=>{const n=document.createElement("a");n.download=e,n.style.display="none";const i=new Blob([t]);n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)};return t(t({},a(e)),{fileChange:t=>{console.log(t);const n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=t=>{var n;e.config.image=null==(n=t.target)?void 0:n.result}},download:()=>{const t=s();r((u=t,v()),"test.html")},addBtn:()=>{e.config.btn.push(JSON.parse(JSON.stringify(y)))},removeBtn:t=>{e.config.btn.splice(t,1)},removeFixedBtn:t=>{e.config.fixedbtn.splice(t,1)},addFixedBtn:()=>{e.config.fixedbtn.push(JSON.parse(JSON.stringify(y)))},drop:t=>{t.preventDefault();const i=Math.abs(l-t.screenX),a=Math.abs(d-t.screenY);o?(l-t.screenX>0?e.config.fixedbtn[n].left-=i:e.config.fixedbtn[n].left+=i,d-t.screenY>0?e.config.fixedbtn[n].top-=a:e.config.fixedbtn[n].top+=a,e.config.fixedbtn[n].left>375&&(e.config.fixedbtn[n].left=365)):(l-t.screenX>0?e.config.btn[n].left-=i:e.config.btn[n].left+=i,d-t.screenY>0?e.config.btn[n].top-=a:e.config.btn[n].top+=a)},dragover:t=>{t.preventDefault()},dragstart:t=>{n=t.target.dataset.index,o="fixed"===t.target.dataset.type,console.log(t.target.dataset.type),l=t.screenX,d=t.screenY},resize:t=>{console.log(t.target.clientWidth,t.target.clientHeight),n=t.target.dataset.index,e.config.btn[n].width=t.target.clientWidth,e.config.btn[n].height=t.target.clientHeight},resizeFixed:t=>{console.log(t.target.clientWidth,t.target.clientHeight),n=t.target.dataset.index,e.config.fixedbtn[n].width=t.target.clientWidth,e.config.fixedbtn[n].height=t.target.clientHeight}})}}),C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACHElEQVRYR+1WPYgTQRT+ZmfINlY22thoY2OjxdkIYqOFNpK7IhGMZJmQhbT+VGrlTxvYMMMG0twdXOQaLbQ5Dq65K7SxsdHGRhsrm4WdPBnYg5jMbfb0jkFw23lvvm/f9817j8Hzxzzj4z+BuQpEUXSVc36XiFoAHimlXjDG6E+kIiLW6XSeA7gP4OlkMtlO03R7+q45AlLKJwAeTwVthmHY6Pf72WFI9Hq9MMuyNQC39/MYYyOl1L1FBFx/+1oI0UiS5GcVEnEcnzDGrBPRzdl4rfVvP+2qwEMAzxxAb40xzeFw+KOMRLvdPimEWCOi6464l1rrB6UVKHR7NV26/QQi2iKiRpqm310kWq3W6TAMV4nomuN8UylVn/WT8xkW+o0B3Jq9iDG2wzlvJknydfosjuMzxhgLfsWR86ZWq9VdPjqwD1gd8zy3JG44LtwNgqA5GAy+2DMp5TkAqwCWHLHvOOf1g/xT2oisnkEQjBljrpK+B3CnALTgFx3gW3meL5f5ZmEnjKLoFOd87CotgI8F6AWXVFmWrYxGo29lpl1IwCYX+m4Q0eUqzxDAnhBiedYnrtxKBGxit9s9a4zZAHBpAYkPAFa01p+rkK1MoDDbeQCWxFzJCzAriQX/VAXcxvw7BLxK4NWEXp+h10bktRV7HUbex7GU0u9CIqX0vpL5XUq9r+VVh8hRxR1qGB0VaOlWfBwgf70RHSepXzG9ZjB+CHOvAAAAAElFTkSuQmCC";const B=c("data-v-1a6dd80c");l("data-v-1a6dd80c");const z={class:"controls"},F={class:"btn-group"},W=g("label",{class:"btn-upload button-l",for:"file"},"选择背景",-1),O={class:"config"},V=m("标题："),Y={class:"btn-config"},H={class:"url-list"},M={class:"btn-config"},R={class:"url-list"},U=g("p",{class:"tips"},"tips：增加的按钮是可点击的透明元素",-1),j=g("p",{class:"preview"},"预览",-1),D={class:"phone"};d();const E=B(((t,e,n,i,a,l)=>{const d=o("Wrapper");return s(),r(d,{title:"H5 落地页生成",width:"600"},{default:B((()=>[g("div",z,[g("div",F,[W,g("input",{id:"file",type:"file",accept:"image/*",onChange:e[1]||(e[1]=(...e)=>t.fileChange&&t.fileChange(...e)),ref:"file"},null,544),g("div",{class:"btn-transform button-l",onClick:e[2]||(e[2]=(...e)=>t.download&&t.download(...e))},"下载html")]),g("div",O,[g("div",null,[V,f(g("input",{class:"title",type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.config.title=e),placeholder:"请输入页面标题"},null,512),[[p,t.config.title]])])])]),g("div",Y,[g("div",{class:"add-btn button-m",onClick:e[4]||(e[4]=(...e)=>t.addBtn&&t.addBtn(...e))},"添加固定按钮"),g("div",H,[(s(!0),r(h,null,b(t.config.btn,((e,n)=>(s(),r("div",{class:"url-item",key:n},[m(" 固定按钮("+x(n)+")：",1),f(g("input",{class:"href",type:"text","onUpdate:modelValue":t=>e.link=t,placeholder:"请输入跳转链接"},null,8,["onUpdate:modelValue"]),[[p,e.link]]),g("img",{onClick:e=>t.removeBtn(n),class:"btn-del",src:C},null,8,["onClick"])])))),128))])]),g("div",M,[g("div",{class:"add-btn button-m",onClick:e[5]||(e[5]=(...e)=>t.addFixedBtn&&t.addFixedBtn(...e))},"添加悬浮按钮"),g("div",R,[(s(!0),r(h,null,b(t.config.fixedbtn,((e,n)=>(s(),r("div",{class:"url-item",key:n},[m(" 悬浮按钮("+x(n)+")：",1),f(g("input",{class:"href",type:"text","onUpdate:modelValue":t=>e.link=t,placeholder:"请输入跳转链接"},null,8,["onUpdate:modelValue"]),[[p,e.link]]),g("img",{onClick:e=>t.removeFixedBtn(n),class:"btn-del",src:C},null,8,["onClick"])])))),128))])]),U,j,g("div",D,[g("div",{class:"viewport",onDrop:e[10]||(e[10]=(...e)=>t.drop&&t.drop(...e)),onDragover:e[11]||(e[11]=(...e)=>t.dragover&&t.dragover(...e))},[g("img",{src:t.config.image},null,8,["src"]),(s(!0),r(h,null,b(t.config.btn,((n,i)=>(s(),r("div",{key:i,class:"btn-draggable",draggable:"true","data-index":i,"data-type":"absolute",style:{left:n.left+"px",top:n.top+"px"},onDragstart:e[6]||(e[6]=(...e)=>t.dragstart&&t.dragstart(...e)),onMouseup:e[7]||(e[7]=(...e)=>t.resize&&t.resize(...e))}," 固定按钮("+x(i)+") ",45,["data-index"])))),128)),(s(!0),r(h,null,b(t.config.fixedbtn,((n,i)=>(s(),r("div",{key:i,class:"btn-draggable",draggable:"true","data-index":i,"data-type":"fixed",style:{left:n.left+"px",top:n.top+"px"},onDragstart:e[8]||(e[8]=(...e)=>t.dragstart&&t.dragstart(...e)),onMouseup:e[9]||(e[9]=(...e)=>t.resizeFixed&&t.resizeFixed(...e))}," 悬浮按钮("+x(i)+") ",45,["data-index"])))),128))],32)])])),_:1})}));k.render=E,k.__scopeId="data-v-1a6dd80c";export default k;
