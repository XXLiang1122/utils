var t=Object.assign;import{d as e,r as n,t as i,p as l,a,o as d,c as o,b as s,w as r,v as c,F as g,e as f,f as p,g as h,h as b}from"./index.556b9852.js";let m={};const x=()=>`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1,user-scalable=no">\n      <title>${m.title||"标题"}</title>\n      <style>\n        html {\n          font-size: calc(100vw/3.75);\n          -webkit-text-size-adjust: 100%;\n        }\n        body {\n          width: 100%;\n          margin: 0;\n          overflow: auto;\n        }\n        img {\n          position: relative;\n          z-index: -1;\n          display: block;\n          width: 100%;\n        }\n        .btn {\n          position: absolute;\n        }\n        .fixed-btn {\n          position: fixed;\n        }\n      </style>\n    </head>\n    <body>\n    <img src="${m.image}">\n    ${u()}\n    ${v()}\n    </body>\n    </html>`,u=()=>{let t="";return m.btn.forEach((e=>{t+=`<a href="${e.link}"><div class="btn" style="width: ${e.width}; height: ${e.height}; top: ${e.top}; left: ${e.left}; display: ${e.width?"block":"none"}"></div></a>`})),t},v=()=>{let t="";return m.fixedbtn.forEach((e=>{t+=`<a href="${e.link}"><div class="fixed-btn" style="width: ${e.width}; height: ${e.height}; top: ${e.top}; left: ${e.left}; display: ${e.width?"block":"none"}"></div></a>`})),t},w={link:"",width:"140",height:"40",top:0,left:0};var A=e({name:"SimpleH5",setup:()=>{const e=n({config:{title:"",image:"",btn:[],fixedbtn:[]}});let l=0,a=0,d=0,o=!1;const s=()=>{const t=JSON.parse(JSON.stringify(e.config));return t.btn.map((t=>{t.width=t.width/100+"rem",t.height=t.height/100+"rem",t.top=t.top/100+"rem",t.left=t.left/100+"rem"})),t.fixedbtn.map((t=>{t.width=t.width/100+"rem",t.height=t.height/100+"rem",t.top=t.top/100+"rem",t.left=t.left/100+"rem"})),t},r=(t,e)=>{const n=document.createElement("a");n.download=e,n.style.display="none";const i=new Blob([t]);n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)};return t(t({},i(e)),{fileChange:t=>{console.log(t);const n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=t=>{var n;e.config.image=null==(n=t.target)?void 0:n.result}},download:()=>{const t=s();r((m=t,x()),"test.html")},addBtn:()=>{e.config.btn.push(JSON.parse(JSON.stringify(w)))},removeBtn:t=>{e.config.btn.splice(t,1)},addFixedBtn:()=>{e.config.fixedbtn.push(JSON.parse(JSON.stringify(w)))},drop:t=>{t.preventDefault();const n=Math.abs(a-t.screenX),i=Math.abs(d-t.screenY);o?(a-t.screenX>0?e.config.fixedbtn[l].left-=n:e.config.fixedbtn[l].left+=n,d-t.screenY>0?e.config.fixedbtn[l].top-=i:e.config.fixedbtn[l].top+=i,e.config.fixedbtn[l].left>375&&(e.config.fixedbtn[l].left=365)):(a-t.screenX>0?e.config.btn[l].left-=n:e.config.btn[l].left+=n,d-t.screenY>0?e.config.btn[l].top-=i:e.config.btn[l].top+=i)},dragover:t=>{t.preventDefault()},dragstart:t=>{l=t.target.dataset.index,o="fixed"===t.target.dataset.type,console.log(t.target.dataset.type),a=t.screenX,d=t.screenY},resize:t=>{console.log(t.target.clientWidth,t.target.clientHeight),l=t.target.dataset.index,e.config.btn[l].width=t.target.clientWidth,e.config.btn[l].height=t.target.clientHeight},resizeFixed:t=>{console.log(t.target.clientWidth,t.target.clientHeight),l=t.target.dataset.index,e.config.fixedbtn[l].width=t.target.clientWidth,e.config.fixedbtn[l].height=t.target.clientHeight}})}}),y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACHElEQVRYR+1WPYgTQRT+ZmfINlY22thoY2OjxdkIYqOFNpK7IhGMZJmQhbT+VGrlTxvYMMMG0twdXOQaLbQ5Dq65K7SxsdHGRhsrm4WdPBnYg5jMbfb0jkFw23lvvm/f9817j8Hzxzzj4z+BuQpEUXSVc36XiFoAHimlXjDG6E+kIiLW6XSeA7gP4OlkMtlO03R7+q45AlLKJwAeTwVthmHY6Pf72WFI9Hq9MMuyNQC39/MYYyOl1L1FBFx/+1oI0UiS5GcVEnEcnzDGrBPRzdl4rfVvP+2qwEMAzxxAb40xzeFw+KOMRLvdPimEWCOi6464l1rrB6UVKHR7NV26/QQi2iKiRpqm310kWq3W6TAMV4nomuN8UylVn/WT8xkW+o0B3Jq9iDG2wzlvJknydfosjuMzxhgLfsWR86ZWq9VdPjqwD1gd8zy3JG44LtwNgqA5GAy+2DMp5TkAqwCWHLHvOOf1g/xT2oisnkEQjBljrpK+B3CnALTgFx3gW3meL5f5ZmEnjKLoFOd87CotgI8F6AWXVFmWrYxGo29lpl1IwCYX+m4Q0eUqzxDAnhBiedYnrtxKBGxit9s9a4zZAHBpAYkPAFa01p+rkK1MoDDbeQCWxFzJCzAriQX/VAXcxvw7BLxK4NWEXp+h10bktRV7HUbex7GU0u9CIqX0vpL5XUq9r+VVh8hRxR1qGB0VaOlWfBwgf70RHSepXzG9ZjB+CHOvAAAAAElFTkSuQmCC";const k=p("data-v-64f5816c");l("data-v-64f5816c");const C={class:"wrapper"},B=s("header",null,"H5 落地页生成",-1),z={class:"content"},F={class:"controls"},O={class:"btn-group"},V=s("label",{class:"btn-upload",for:"file"},"选择背景",-1),W={class:"config"},Y=h("标题："),H={class:"btn-config"},M={class:"url-list"},R={class:"btn-config"},U={class:"url-list"},D=s("p",{class:"tips"},"tips：增加的按钮是可点击的透明元素",-1),E=s("p",{class:"preview"},"预览",-1),X={class:"phone"};a();const j=k(((t,e,n,i,l,a)=>(d(),o("div",C,[B,s("div",z,[s("div",F,[s("div",O,[V,s("input",{id:"file",type:"file",accept:"image/*",onChange:e[1]||(e[1]=(...e)=>t.fileChange&&t.fileChange(...e)),ref:"file"},null,544),s("div",{class:"btn-transform",onClick:e[2]||(e[2]=(...e)=>t.download&&t.download(...e))},"下载html")]),s("div",W,[s("div",null,[Y,r(s("input",{class:"title",type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.config.title=e),placeholder:"请输入页面标题"},null,512),[[c,t.config.title]])])])]),s("div",H,[s("div",{class:"add-btn",onClick:e[4]||(e[4]=(...e)=>t.addBtn&&t.addBtn(...e))},"添加固定按钮"),s("div",M,[(d(!0),o(g,null,f(t.config.btn,((e,n)=>(d(),o("div",{class:"url-item",key:n},[h(" 固定按钮("+b(n)+")：",1),r(s("input",{class:"href",type:"text","onUpdate:modelValue":t=>e.link=t,placeholder:"请输入跳转链接"},null,8,["onUpdate:modelValue"]),[[c,e.link]]),s("img",{onClick:e=>t.removeBtn(n),class:"btn-del",src:y},null,8,["onClick"])])))),128))])]),s("div",R,[s("div",{class:"add-btn",onClick:e[5]||(e[5]=(...e)=>t.addFixedBtn&&t.addFixedBtn(...e))},"添加悬浮按钮"),s("div",U,[(d(!0),o(g,null,f(t.config.fixedbtn,((e,n)=>(d(),o("div",{class:"url-item",key:n},[h(" 悬浮按钮("+b(n)+")：",1),r(s("input",{class:"href",type:"text","onUpdate:modelValue":t=>e.link=t,placeholder:"请输入跳转链接"},null,8,["onUpdate:modelValue"]),[[c,e.link]]),s("img",{onClick:e=>t.removeFixedBtn(n),class:"btn-del",src:y},null,8,["onClick"])])))),128))])]),D,E,s("div",X,[s("div",{class:"viewport",onDrop:e[10]||(e[10]=(...e)=>t.drop&&t.drop(...e)),onDragover:e[11]||(e[11]=(...e)=>t.dragover&&t.dragover(...e))},[s("img",{src:t.config.image},null,8,["src"]),(d(!0),o(g,null,f(t.config.btn,((n,i)=>(d(),o("div",{key:i,class:"btn-draggable",draggable:"true","data-index":i,"data-type":"absolute",style:{left:n.left+"px",top:n.top+"px"},onDragstart:e[6]||(e[6]=(...e)=>t.dragstart&&t.dragstart(...e)),onMouseup:e[7]||(e[7]=(...e)=>t.resize&&t.resize(...e))}," 固定按钮("+b(i)+") ",45,["data-index"])))),128)),(d(!0),o(g,null,f(t.config.fixedbtn,((n,i)=>(d(),o("div",{key:i,class:"btn-draggable",draggable:"true","data-index":i,"data-type":"fixed",style:{left:n.left+"px",top:n.top+"px"},onDragstart:e[8]||(e[8]=(...e)=>t.dragstart&&t.dragstart(...e)),onMouseup:e[9]||(e[9]=(...e)=>t.resizeFixed&&t.resizeFixed(...e))}," 悬浮按钮("+b(i)+") ",45,["data-index"])))),128))],32)])])]))));A.render=j,A.__scopeId="data-v-64f5816c";export default A;
