function t(t,n,r){return t(r={path:n,exports:{},require:function(t,n){return e(null==n&&r.path)}},r.exports),r.exports}function e(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}t((function(t){var e,n,r,o,i,a,s,f,c,l,u,h,d,p,v=v||{REVISION:"ALPHA"};e=v,n=256,r=512,o=1024,i=new Int32Array([-1,1,4,-1,4,-1,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,8]),a=function(t){return 65280&t},s=function(t){return 255&t},f=function(t){return i[(65280&t)>>8]},c=function(t,e){this.size=-8&(t+7|0),void 0===e?this.buffer=new ArrayBuffer(this.size):(this.buffer=e,this.size=e.length),this.u8=new Uint8Array(this.buffer),this.i32=new Int32Array(this.buffer),this.f32=new Float32Array(this.buffer),this.f64=new Float64Array(this.buffer)},l=function(){function t(t,e,i,f){this.type=0|a(i),this.channel=0|s(i),this.cols=0|t,this.rows=0|e,void 0===f?this.allocate():(this.buffer=f,this.data=this.type&n?this.buffer.u8:this.type&r?this.buffer.i32:this.type&o?this.buffer.f32:this.buffer.f64)}return t.prototype.allocate=function(){delete this.data,delete this.buffer,this.buffer=new c(this.cols*f(this.type)*this.channel*this.rows),this.data=this.type&n?this.buffer.u8:this.type&r?this.buffer.i32:this.type&o?this.buffer.f32:this.buffer.f64},t.prototype.copy_to=function(t){for(var e=t.data,n=this.data,r=0,o=this.cols*this.rows*this.channel|0;r<o-4;r+=4)e[r]=n[r],e[r+1]=n[r+1],e[r+2]=n[r+2],e[r+3]=n[r+3];for(;r<o;++r)e[r]=n[r]},t.prototype.resize=function(t,e,n){void 0===n&&(n=this.channel),t*f(this.type)*n*e>this.buffer.size?(this.cols=t,this.rows=e,this.channel=n,this.allocate()):(this.cols=t,this.rows=e,this.channel=n)},t}(),u=function(){function t(t){this.levels=0|t,this.data=new Array(t),this.pyrdown=v.imgproc.pyrdown}return t.prototype.allocate=function(t,e,n){for(var r=this.levels;--r>=0;)this.data[r]=new l(t>>r,e>>r,n)},t.prototype.build=function(t,e){void 0===e&&(e=!0);var n=2,r=t,o=this.data[0];if(!e)for(var i=t.cols*t.rows;--i>=0;)o.data[i]=t.data[i];for(o=this.data[1],this.pyrdown(r,o);n<this.levels;++n)r=o,o=this.data[n],this.pyrdown(r,o)},t}(),h=function(t,e,n,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=-1),this.x=t,this.y=e,this.score=n,this.level=r,this.angle=o},e.U8_t=n,e.S32_t=r,e.F32_t=o,e.S64_t=2048,e.F64_t=4096,e.C1_t=1,e.C2_t=2,e.C3_t=3,e.C4_t=4,e.U8C1_t=257,e.U8C3_t=259,e.U8C4_t=260,e.F32C1_t=1025,e.F32C2_t=1026,e.S32C1_t=513,e.S32C2_t=514,e.EPSILON=1.192092896e-7,e.FLT_MIN=1e-37,e.COLOR_RGBA2GRAY=0,e.COLOR_RGB2GRAY=1,e.COLOR_BGRA2GRAY=2,e.COLOR_BGR2GRAY=3,e.BOX_BLUR_NOSCALE=1,e.SVD_U_T=1,e.SVD_V_T=2,e.get_data_type=a,e.get_channel=s,e.get_data_type_size=f,e.data_t=c,e.matrix_t=l,e.pyramid_t=u,e.keypoint_t=h,d=v,p=function(){var t,e,n=function(){function t(t){this.next=null,this.data=new v.data_t(t),this.size=this.data.size,this.buffer=this.data.buffer,this.u8=this.data.u8,this.i32=this.data.i32,this.f32=this.data.f32,this.f64=this.data.f64}return t.prototype.resize=function(t){delete this.data,this.data=new v.data_t(t),this.size=this.data.size,this.buffer=this.data.buffer,this.u8=this.data.u8,this.i32=this.data.i32,this.f32=this.data.f32,this.f64=this.data.f64},t}();return{allocate:function(r,o){t=e=new n(o);for(var i=0;i<r;++i){var a=new n(o);e=e.next=a}},get_buffer:function(e){var n=t;return t=t.next,e>n.size&&n.resize(e),n},put_buffer:function(t){e=e.next=t}}}(),d.cache=p,p.allocate(30,2560),function(t){var e=function(){var t=new Int32Array(96);return{get_gaussian_kernel:function(t,e,n,r){var o=0,i=0,a=0,s=0,f=0,c=0,l=v.cache.get_buffer(t<<2),u=l.f32;if(1==(1&t)&&t<=7&&e<=0)switch(t>>1){case 0:u[0]=1,c=1;break;case 1:u[0]=.25,u[1]=.5,u[2]=.25,c=1;break;case 2:u[0]=.0625,u[1]=.25,u[2]=.375,u[3]=.25,u[4]=.0625,c=1;break;case 3:u[0]=.03125,u[1]=.109375,u[2]=.21875,u[3]=.28125,u[4]=.21875,u[5]=.109375,u[6]=.03125,c=1}else for(f=-.5/((s=e>0?e:.3*(.5*(t-1)-1)+.8)*s);o<t;++o)i=o-.5*(t-1),a=Math.exp(f*i*i),u[o]=a,c+=a;if(r&v.U8_t)for(c=256/c,o=0;o<t;++o)n[o]=u[o]*c+.5|0;else for(c=1/c,o=0;o<t;++o)n[o]=u[o]*c;v.cache.put_buffer(l)},perspective_4point_transform:function(t,e,n,r,o,i,a,s,f,c,l,u,h,d,p,v,_){var m=e,g=c,y=a,b=m*g*y,x=p,w=m*x,M=g*w,k=l,C=m*k,S=i,O=n,E=d,A=O*E,R=A*S,F=E*S*k,z=E*y,L=E*k,U=g*y,I=x*g,P=x*S,N=k*S,T=1/(z-L-U+I-P+N),V=m*E,D=O*S,j=y*m,q=x*j,B=O*g,W=A*k,$=O*k*S,G=y*x*g,H=x*O,Y=-(M-b+C*S-S*w-A*g+R-F+z*g)*T,K=(b-M-V*y+V*k+R-g*D+P*g-F)*T,J=m,Q=(-k*w+q+B*y-A*y+W-$+P*k-G)*T,X=(j*k-q-H*g+W-$+H*S+G-z*k)*T,Z=O,tt=(-C+j+B-D+L-z-I+P)*T,et=(-w+C+A-B+P-N-z+U)*T,nt=-((M=(g=u)*(w=(m=r)*(x=_)))-(b=m*g*(y=f))+(C=m*(k=h))*(S=s)-S*w-(A=(O=o)*(E=v))*g+(R=A*S)-(F=E*S*k)+(z=E*y)*g)*(T=1/(z-(L=E*k)-(U=g*y)+(I=x*g)-(P=x*S)+(N=k*S))),rt=(b-M-(V=m*E)*y+V*k+R-g*(D=O*S)+P*g-F)*T,ot=m,it=(-k*w+(q=x*(j=y*m))+(B=O*g)*y-A*y+(W=A*k)-($=O*k*S)+P*k-(G=y*x*g))*T,at=(j*k-q-(H=x*O)*g+W-$+H*S+G-z*k)*T,st=O,ft=(-C+j+B-D+L-z-I+P)*T,ct=(-w+C+A-B+P-N-z+U)*T,lt=J*tt;R=Z*tt-Q;var ut=-Q*et+X*tt,ht=Y-lt;D=Y*et-(C=K*tt);var dt=(b=Y*Z)-(M=J*Q),pt=(y=Y*X)-(w=Q*K);$=(g=X-et*Z)*(E=1/(y-b*et-w+M*et+C*Z-lt*X));var vt=(N=J*et-K)*E,_t=(j=-K*Z+J*X)*E,mt=t.data;mt[0]=nt*$+rt*(R*E)-ot*(ut*E),mt[1]=nt*vt+rt*(ht*E)-ot*(D*E),mt[2]=-nt*_t-rt*(dt*E)+ot*(pt*E),mt[3]=it*$+at*(R*E)-st*(ut*E),mt[4]=it*vt+at*(ht*E)-st*(D*E),mt[5]=-it*_t-at*(dt*E)+st*(pt*E),mt[6]=ft*$+ct*(R*E)-ut*E,mt[7]=ft*vt+ct*(ht*E)-D*E,mt[8]=-ft*_t-ct*(dt*E)+pt*E},qsort:function(e,n,r,o){var i,a,s,f,c=0,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=t;if(!(r-n+1<=1))for(O[0]=n,O[1]=r;c>=0;)for(l=O[c<<1],u=O[1+(c<<1)],c--;;){if((d=u-l+1)<=7){for(v=l+1;v<=u;v++)for(_=v;_>l&&o(e[_],e[_-1]);_--)i=e[_],e[_]=e[_-1],e[_-1]=i;break}for(S=0,g=l,b=u,w=l+(d>>1),d>40&&(k=l+(m=d>>3),C=l+(m<<1),a=e[M=l],s=e[k],f=e[C],l=o(a,s)?o(s,f)?k:o(a,f)?C:M:o(f,s)?k:o(a,f)?M:C,k=w,C=w+m,a=e[M=w-m],s=e[k],f=e[C],w=o(a,s)?o(s,f)?k:o(a,f)?C:M:o(f,s)?k:o(a,f)?M:C,k=u-m,C=u,a=e[M=u-(m<<1)],s=e[k],f=e[C],u=o(a,s)?o(s,f)?k:o(a,f)?C:M:o(f,s)?k:o(a,f)?M:C),k=w,C=u,a=e[M=l],s=e[k],f=e[C],(w=o(a,s)?o(s,f)?k:o(a,f)?C:M:o(f,s)?k:o(a,f)?M:C)!=g&&(i=e[w],e[w]=e[g],e[g]=i,w=g),l=y=g+1,u=x=b,a=e[w];;){for(;l<=u&&!o(a,e[l]);)o(e[l],a)||(l>y&&(i=e[y],e[y]=e[l],e[l]=i),S=1,y++),l++;for(;l<=u&&!o(e[u],a);)o(a,e[u])||(u<x&&(i=e[x],e[x]=e[u],e[u]=i),S=1,x--),u--;if(l>u)break;i=e[l],e[l]=e[u],e[u]=i,S=1,l++,u--}if(0==S){for(u=b,v=(l=g)+1;v<=u;v++)for(_=v;_>l&&o(e[_],e[_-1]);_--)i=e[_],e[_]=e[_-1],e[_-1]=i;break}for(p=l-(d=Math.min(y-g,l-y))|0,h=0;h<d;++h,++p)i=e[g+h],e[g+h]=e[p],e[p]=i;for(p=b-(d=Math.min(b-x,x-u))+1|0,h=0;h<d;++h,++p)i=e[l+h],e[l+h]=e[p],e[p]=i;if(p=x-u,(d=l-y)>1)p>1?d>p?(O[++c<<1]=g,O[1+(c<<1)]=g+d-1,l=b-p+1,u=b):(O[++c<<1]=b-p+1,O[1+(c<<1)]=b,l=g,u=g+d-1):(l=g,u=g+d-1);else{if(!(p>1))break;l=b-p+1,u=b}}},median:function(t,e,n){for(var r,o=0,i=0,a=0,s=e+n>>1;;){if(n<=e)return t[s];if(n==e+1)return t[e]>t[n]&&(r=t[e],t[e]=t[n],t[n]=r),t[s];for(t[o=e+n>>1]>t[n]&&(r=t[o],t[o]=t[n],t[n]=r),t[e]>t[n]&&(r=t[e],t[e]=t[n],t[n]=r),t[o]>t[e]&&(r=t[o],t[o]=t[e],t[e]=r),i=e+1,r=t[o],t[o]=t[i],t[i]=r,a=n;;){do{++i}while(t[e]>t[i]);do{--a}while(t[a]>t[e]);if(a<i)break;r=t[i],t[i]=t[a],t[a]=r}r=t[e],t[e]=t[a],t[a]=r,a<=s?e=i:a>=s&&(n=a-1)}return 0}}}();t.math=e}(v),function(t){var e={identity:function(t,e){void 0===e&&(e=1);for(var n=t.data,r=t.rows,o=t.cols,i=o+1|0,a=r*o,s=a;--a>=0;)n[a]=0;for(a=s,s=0;s<a;)n[s]=e,s+=i},transpose:function(t,e){for(var n=0,r=0,o=e.rows,i=e.cols,a=0,s=0,f=0,c=e.data,l=t.data;n<o;s+=1,a+=i,n++)for(f=s,r=0;r<i;f+=o,r++)l[f]=c[a+r]},multiply:function(t,e,n){for(var r=0,o=0,i=0,a=0,s=0,f=0,c=0,l=0,u=e.cols,h=e.rows,d=n.cols,p=e.data,v=n.data,_=t.data,m=0;r<h;a+=u,r++)for(c=0,o=0;o<d;l++,c++,o++){for(f=c,s=a,m=0,i=0;i<u;s++,f+=d,i++)m+=p[s]*v[f];_[l]=m}},multiply_ABt:function(t,e,n){for(var r=0,o=0,i=0,a=0,s=0,f=0,c=0,l=e.cols,u=e.rows,h=n.rows,d=e.data,p=n.data,v=t.data,_=0;r<u;a+=l,r++)for(f=0,o=0;o<h;c++,o++){for(s=a,_=0,i=0;i<l;s++,f++,i++)_+=d[s]*p[f];v[c]=_}},multiply_AtB:function(t,e,n){for(var r=0,o=0,i=0,a=0,s=0,f=0,c=0,l=0,u=e.cols,h=e.rows,d=n.cols,p=e.data,v=n.data,_=t.data,m=0;r<u;a++,r++)for(c=0,o=0;o<d;l++,c++,o++){for(f=c,s=a,m=0,i=0;i<h;s+=u,f+=d,i++)m+=p[s]*v[f];_[l]=m}},multiply_AAt:function(t,e){for(var n=0,r=0,o=0,i=0,a=0,s=0,f=0,c=0,l=0,u=e.cols,h=e.rows,d=e.data,p=t.data,v=0;n<h;i+=h+1,a=s,n++)for(c=i,l=i,f=a,r=n;r<h;c++,l+=h,r++){for(s=a,v=0,o=0;o<u;o++)v+=d[s++]*d[f++];p[c]=v,p[l]=v}},multiply_AtA:function(t,e){for(var n=0,r=0,o=0,i=0,a=0,s=0,f=0,c=0,l=0,u=e.cols,h=e.rows,d=e.data,p=t.data,v=0;n<u;f+=u,n++)for(i=n,c=l=f+n,r=n;r<u;c++,l+=u,r++){for(a=i,s=r,v=0,o=0;o<h;a+=u,s+=u,o++)v+=d[a]*d[s];p[c]=v,p[l]=v}},identity_3x3:function(t,e){void 0===e&&(e=1);var n=t.data;n[0]=n[4]=n[8]=e,n[1]=n[2]=n[3]=0,n[5]=n[6]=n[7]=0},invert_3x3:function(t,e){var n=t.data,r=e.data,o=n[4],i=n[8],a=n[5],s=n[7],f=n[0],c=f*o,l=f*a,u=n[3],h=n[1],d=u*h,p=n[2],v=u*p,_=n[6],m=_*h,g=_*p,y=1/(c*i-l*s-d*i+v*s+m*a-g*o);r[0]=(o*i-a*s)*y,r[1]=-(h*i-p*s)*y,r[2]=-(-h*a+p*o)*y,r[3]=-(u*i-a*_)*y,r[4]=(f*i-g)*y,r[5]=-(l-v)*y,r[6]=-(-u*s+o*_)*y,r[7]=-(f*s-m)*y,r[8]=(c-d)*y},multiply_3x3:function(t,e,n){var r=t.data,o=e.data,i=n.data,a=o[0],s=o[1],f=o[2],c=o[3],l=o[4],u=o[5],h=o[6],d=o[7],p=o[8],v=i[0],_=i[1],m=i[2],g=i[3],y=i[4],b=i[5],x=i[6],w=i[7],M=i[8];r[0]=a*v+s*g+f*x,r[1]=a*_+s*y+f*w,r[2]=a*m+s*b+f*M,r[3]=c*v+l*g+u*x,r[4]=c*_+l*y+u*w,r[5]=c*m+l*b+u*M,r[6]=h*v+d*g+p*x,r[7]=h*_+d*y+p*w,r[8]=h*m+d*b+p*M},mat3x3_determinant:function(t){var e=t.data;return e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[3]*e[1]*e[8]+e[3]*e[2]*e[7]+e[6]*e[1]*e[5]-e[6]*e[2]*e[4]},determinant_3x3:function(t,e,n,r,o,i,a,s,f){return t*o*f-t*i*s-r*e*f+r*n*s+a*e*i-a*n*o}};t.matmath=e}(v),function(t){var e,n,r=(e=function(t,e,n,r){r=t[e],t[e]=t[n],t[n]=r},n=function(t,e){return(t=Math.abs(t))>(e=Math.abs(e))?(e/=t,t*Math.sqrt(1+e*e)):e>0?(t/=e,e*Math.sqrt(1+t*t)):0},{lu_solve:function(t,n){var r,o,i,a,s=0,f=0,c=0,l=t.cols,u=t.data,h=n.data;for(s=0;s<l;s++){for(c=s,f=s+1;f<l;f++)Math.abs(u[f*l+s])>Math.abs(u[c*l+s])&&(c=f);if(Math.abs(u[c*l+s])<v.EPSILON)return 0;if(c!=s){for(f=s;f<l;f++)e(u,s*l+f,c*l+f,r);e(h,s,c,r)}for(i=-1/u[s*l+s],f=s+1;f<l;f++){for(o=u[f*l+s]*i,c=s+1;c<l;c++)u[f*l+c]+=o*u[s*l+c];h[f]+=o*h[s]}u[s*l+s]=-i}for(s=l-1;s>=0;s--){for(a=h[s],c=s+1;c<l;c++)a-=u[s*l+c]*h[c];h[s]=a*u[s*l+s]}return 1},cholesky_solve:function(t,e){var n,r,o=0,i=0,a=0,s=0,f=0,c=0,l=0,u=t.cols,h=t.data,d=e.data;for(o=0;o<u;o++)for(r=1,f=s=o*u,i=o;i<u;i++){for(n=h[f+o],a=0;a<o;a++)n-=h[a*u+o]*h[f+a];if(i==o){if(h[f+o]=n,0==n)return 0;r=1/n}else h[s+i]=n,h[f+o]=n*r;f+=u}for(s=0,c=0;c<u;c++){for(n=d[c],l=0;l<c;l++)n-=h[s+l]*d[l];d[c]=n,s+=u}for(s=0,c=0;c<u;c++)d[c]/=h[s+c],s+=u;for(c=u-1;c>=0;c--){for(n=d[c],s=(l=c+1)*u;l<u;l++)n-=h[s+c]*d[l],s+=u;d[c]=n}return 1},svd_decompose:function(t,r,o,i,a){void 0===a&&(a=0);var s=0,f=0,c=t.rows,l=t.cols,u=c,h=l,d=t.type|v.C1_t;u<h&&(s=1,f=u,u=h,h=f);var p=v.cache.get_buffer(u*u<<3),_=v.cache.get_buffer(h<<3),m=v.cache.get_buffer(h*h<<3),g=new v.matrix_t(u,u,d,p.data),y=new v.matrix_t(1,h,d,_.data),b=new v.matrix_t(h,h,d,m.data);if(0==s)v.matmath.transpose(g,t);else{for(f=0;f<l*c;f++)g.data[f]=t.data[f];for(;f<h*u;f++)g.data[f]=0}if(function(t,r,o,i,a,s,f,c){for(var l=2*v.EPSILON,u=v.FLT_MIN,h=0,d=0,p=0,_=0,m=Math.max(s,30),g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0,E=0,A=0,R=0,F=0,z=0,L=0,U=0,I=4660,P=0,N=0,T=0,V=v.cache.get_buffer(f<<3),D=V.f64;h<f;h++){for(p=0,E=0;p<s;p++)E+=(C=t[h*r+p])*C;if(D[h]=E,i){for(p=0;p<f;p++)i[h*a+p]=0;i[h*a+h]=1}}for(;_<m;_++){for(w=0,h=0;h<f-1;h++)for(d=h+1;d<f;d++){for(g=h*r|0,y=d*r|0,z=D[h],L=0,U=D[d],p=2,L+=t[g]*t[y],L+=t[g+1]*t[y+1];p<s;p++)L+=t[g+p]*t[y+p];if(!(Math.abs(L)<=l*Math.sqrt(z*U))){for(R=n(L*=2,A=z-U),A<0?(F=.5*(R-A),M=L/(R*(k=Math.sqrt(F/R))*2)):k=L/(R*(M=Math.sqrt((R+A)/(2*R)))*2),z=0,U=0,p=2,S=M*t[g]+k*t[y],O=-k*t[g]+M*t[y],t[g]=S,t[y]=O,z+=S*S,U+=O*O,S=M*t[g+1]+k*t[y+1],O=-k*t[g+1]+M*t[y+1],t[g+1]=S,t[y+1]=O,z+=S*S,U+=O*O;p<s;p++)S=M*t[g+p]+k*t[y+p],O=-k*t[g+p]+M*t[y+p],t[g+p]=S,t[y+p]=O,z+=S*S,U+=O*O;if(D[h]=z,D[d]=U,w=1,i)for(x=d*a|0,p=2,S=M*i[b=h*a|0]+k*i[x],O=-k*i[b]+M*i[x],i[b]=S,i[x]=O,S=M*i[b+1]+k*i[x+1],O=-k*i[b+1]+M*i[x+1],i[b+1]=S,i[x+1]=O;p<f;p++)S=M*i[b+p]+k*i[x+p],O=-k*i[b+p]+M*i[x+p],i[b+p]=S,i[x+p]=O}}if(0==w)break}for(h=0;h<f;h++){for(p=0,E=0;p<s;p++)E+=(C=t[h*r+p])*C;D[h]=Math.sqrt(E)}for(h=0;h<f-1;h++){for(d=h,p=h+1;p<f;p++)D[d]<D[p]&&(d=p);if(h!=d&&(e(D,h,d,E),i)){for(p=0;p<s;p++)e(t,h*r+p,d*r+p,C);for(p=0;p<f;p++)e(i,h*a+p,d*a+p,C)}}for(h=0;h<f;h++)o[h]=D[h];if(i){for(h=0;h<c;h++){for(E=h<f?D[h]:0;E<=u;){for(N=1/s,p=0;p<s;p++)P=0!=(256&(I=214013*I+2531011)>>16)?N:-N,t[h*r+p]=P;for(_=0;_<2;_++)for(d=0;d<h;d++){for(E=0,p=0;p<s;p++)E+=t[h*r+p]*t[d*r+p];for(T=0,p=0;p<s;p++)C=t[h*r+p]-E*t[d*r+p],t[h*r+p]=C,T+=Math.abs(C);for(T=T?1/T:0,p=0;p<s;p++)t[h*r+p]*=T}for(E=0,p=0;p<s;p++)E+=(C=t[h*r+p])*C;E=Math.sqrt(E)}for(k=1/E,p=0;p<s;p++)t[h*r+p]*=k}v.cache.put_buffer(V)}else v.cache.put_buffer(V)}(g.data,u,y.data,b.data,h,u,h,u),r){for(f=0;f<h;f++)r.data[f]=y.data[f];for(;f<l;f++)r.data[f]=0}if(0==s){if(o&&a&v.SVD_U_T)for(f=u*u;--f>=0;)o.data[f]=g.data[f];else o&&v.matmath.transpose(o,g);if(i&&a&v.SVD_V_T)for(f=h*h;--f>=0;)i.data[f]=b.data[f];else i&&v.matmath.transpose(i,b)}else{if(o&&a&v.SVD_U_T)for(f=h*h;--f>=0;)o.data[f]=b.data[f];else o&&v.matmath.transpose(o,b);if(i&&a&v.SVD_V_T)for(f=u*u;--f>=0;)i.data[f]=g.data[f];else i&&v.matmath.transpose(i,g)}v.cache.put_buffer(p),v.cache.put_buffer(_),v.cache.put_buffer(m)},svd_solve:function(t,e,n){var r,o=0,i=0,a=0,s=0,f=0,c=t.rows,l=t.cols,u=0,h=0,d=t.type|v.C1_t,p=v.cache.get_buffer(c*c<<3),_=v.cache.get_buffer(l<<3),m=v.cache.get_buffer(l*l<<3),g=new v.matrix_t(c,c,d,p.data),y=new v.matrix_t(1,l,d,_.data),b=new v.matrix_t(l,l,d,m.data),x=n.data,w=g.data,M=y.data,k=b.data;for(this.svd_decompose(t,y,g,b,0),r=v.EPSILON*M[0]*l;o<l;o++,f+=l){for(h=0,i=0;i<l;i++)if(M[i]>r){for(a=0,u=0,s=0;a<c;a++,s+=l)u+=w[s+i]*x[a];h+=u*k[f+i]/M[i]}e.data[o]=h}v.cache.put_buffer(p),v.cache.put_buffer(_),v.cache.put_buffer(m)},svd_invert:function(t,e){var n,r=0,o=0,i=0,a=0,s=0,f=0,c=e.rows,l=e.cols,u=0,h=e.type|v.C1_t,d=v.cache.get_buffer(c*c<<3),p=v.cache.get_buffer(l<<3),_=v.cache.get_buffer(l*l<<3),m=new v.matrix_t(c,c,h,d.data),g=new v.matrix_t(1,l,h,p.data),y=new v.matrix_t(l,l,h,_.data),b=t.data,x=m.data,w=g.data,M=y.data;for(this.svd_decompose(e,g,m,y,0),n=v.EPSILON*w[0]*l;r<l;r++,s+=l)for(o=0,a=0;o<c;o++,f++){for(i=0,u=0;i<l;i++,a++)w[i]>n&&(u+=M[s+i]*x[a]/w[i]);b[f]=u}v.cache.put_buffer(d),v.cache.put_buffer(p),v.cache.put_buffer(_)},eigenVV:function(t,r,o){for(var i=t.cols,a=i*i,s=t.type|v.C1_t,f=v.cache.get_buffer(i*i<<3),c=v.cache.get_buffer(i<<3),l=new v.matrix_t(i,i,s,f.data),u=new v.matrix_t(1,i,s,c.data);--a>=0;)l.data[a]=t.data[a];if(function(t,r,o,i,a,s){var f=v.EPSILON,c=0,l=0,u=0,h=0,d=0,p=0,_=0,m=0,g=0,y=s*s*30,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0,E=0,A=v.cache.get_buffer(s<<2),R=v.cache.get_buffer(s<<2),F=A.i32,z=R.i32;if(i)for(;c<s;c++){for(u=c*a,l=0;l<s;l++)i[u+l]=0;i[u+c]=1}for(u=0;u<s;u++){if(o[u]=t[(r+1)*u],u<s-1){for(h=u+1,b=Math.abs(t[r*u+h]),c=u+2;c<s;c++)b<(x=Math.abs(t[r*u+c]))&&(b=x,h=c);F[u]=h}if(u>0){for(h=0,b=Math.abs(t[u]),c=1;c<u;c++)b<(x=Math.abs(t[r*c+u]))&&(b=x,h=c);z[u]=h}}if(s>1)for(;g<y;g++){for(u=0,b=Math.abs(t[F[0]]),c=1;c<s-1;c++)b<(x=Math.abs(t[r*c+F[c]]))&&(b=x,u=c);for(d=F[u],c=1;c<s;c++)b<(x=Math.abs(t[r*z[c]+c]))&&(b=x,u=z[c],d=c);if(w=t[r*u+d],Math.abs(w)<=f)break;for(M=.5*(o[d]-o[u]),S=(k=Math.abs(M)+n(w,M))/(C=n(w,k)),C=w/C,k=w/k*w,M<0&&(C=-C,k=-k),t[r*u+d]=0,o[u]-=k,o[d]+=k,c=0;c<u;c++)m=r*c+d,O=t[_=r*c+u],E=t[m],t[_]=O*S-E*C,t[m]=O*C+E*S;for(c=u+1;c<d;c++)m=r*c+d,O=t[_=r*u+c],E=t[m],t[_]=O*S-E*C,t[m]=O*C+E*S;for(_=r*u+(c=d+1),m=r*d+c;c<s;c++,_++,m++)O=t[_],E=t[m],t[_]=O*S-E*C,t[m]=O*C+E*S;if(i)for(_=a*u,m=a*d,c=0;c<s;c++,_++,m++)O=i[_],E=i[m],i[_]=O*S-E*C,i[m]=O*C+E*S;for(l=0;l<2;l++){if((p=0==l?u:d)<s-1){for(h=p+1,b=Math.abs(t[r*p+h]),c=p+2;c<s;c++)b<(x=Math.abs(t[r*p+c]))&&(b=x,h=c);F[p]=h}if(p>0){for(h=0,b=Math.abs(t[p]),c=1;c<p;c++)b<(x=Math.abs(t[r*c+p]))&&(b=x,h=c);z[p]=h}}}for(u=0;u<s-1;u++){for(h=u,c=u+1;c<s;c++)o[h]<o[c]&&(h=c);if(u!=h&&(e(o,h,u,b),i))for(c=0;c<s;c++)e(i,a*h+c,a*u+c,b)}v.cache.put_buffer(A),v.cache.put_buffer(R)}(l.data,i,u.data,r?r.data:null,i,i),o)for(;--i>=0;)o.data[i]=u.data[i];v.cache.put_buffer(f),v.cache.put_buffer(c)}});t.linalg=r}(v),function(t){var e,n,r=function(){var t=function(t){return t*t},e=new v.matrix_t(3,3,v.F32_t|v.C1_t),n=new v.matrix_t(3,3,v.F32_t|v.C1_t),r=new v.matrix_t(6,6,v.F32_t|v.C1_t),o=new v.matrix_t(6,1,v.F32_t|v.C1_t),i=function(){function i(){}return i.prototype.run=function(t,i,a,s){var f,c,l=0,u=0,h=a.type|v.C1_t,d=a.data,p=e.data,_=n.data,m=0,g=0;!function(t,e,n,r,o){for(var i,a,s=0,f=0,c=0,l=0,u=0,h=0,d=0,p=0,v=0;s<o;++s)f+=t[s].x,c+=t[s].y,u+=e[s].x,h+=e[s].y;for(f/=o,c/=o,u/=o,h/=o,s=0;s<o;++s)p=t[s].x-f,v=t[s].y-c,l+=Math.sqrt(p*p+v*v),p=e[s].x-u,v=e[s].y-h,d+=Math.sqrt(p*p+v*v);l/=o,d/=o,i=Math.SQRT2/l,a=Math.SQRT2/d,n[0]=n[4]=i,n[2]=-f*i,n[5]=-c*i,n[1]=n[3]=n[6]=n[7]=0,n[8]=1,r[0]=r[4]=a,r[2]=-u*a,r[5]=-h*a,r[1]=r[3]=r[6]=r[7]=0,r[8]=1}(t,i,p,_,s);for(var y=v.cache.get_buffer(2*s*6<<3),b=v.cache.get_buffer(2*s<<3),x=new v.matrix_t(6,2*s,h,y.data),w=new v.matrix_t(1,2*s,h,b.data),M=x.data,k=w.data;l<s;++l)f=t[l],c=i[l],m=p[0]*f.x+p[1]*f.y+p[2],g=p[3]*f.x+p[4]*f.y+p[5],M[u=2*l*6]=m,M[u+1]=g,M[u+2]=1,M[u+3]=0,M[u+4]=0,M[u+5]=0,M[u+=6]=0,M[u+1]=0,M[u+2]=0,M[u+3]=m,M[u+4]=g,M[u+5]=1,k[l<<1]=_[0]*c.x+_[1]*c.y+_[2],k[1+(l<<1)]=_[3]*c.x+_[4]*c.y+_[5];return v.matmath.multiply_AtA(r,x),v.matmath.multiply_AtB(o,x,w),v.linalg.lu_solve(r,o),d[0]=o.data[0],d[1]=o.data[1],d[2]=o.data[2],d[3]=o.data[3],d[4]=o.data[4],d[5]=o.data[5],d[6]=0,d[7]=0,d[8]=1,v.matmath.invert_3x3(n,n),v.matmath.multiply_3x3(a,n,a),v.matmath.multiply_3x3(a,a,e),v.cache.put_buffer(y),v.cache.put_buffer(b),1},i.prototype.error=function(e,n,r,o,i){for(var a,s,f=0,c=r.data;f<i;++f)a=e[f],s=n[f],o[f]=t(s.x-c[0]*a.x-c[1]*a.y-c[2])+t(s.y-c[3]*a.x-c[4]*a.y-c[5])},i.prototype.check_subset=function(t,e,n){return!0},i}(),a=new v.matrix_t(9,9,v.F32_t|v.C1_t),s=new v.matrix_t(9,9,v.F32_t|v.C1_t);return{affine2d:i,homography2d:function(){function t(){}return t.prototype.run=function(t,r,o,i){for(var f=0,c=0,l=o.data,u=e.data,h=n.data,d=a.data,p=s.data,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0;f<i;++f)w+=r[f].x,M+=r[f].y,S+=t[f].x,O+=t[f].y;for(w/=i,M/=i,S/=i,O/=i,f=0;f<i;++f)b+=Math.abs(r[f].x-w),x+=Math.abs(r[f].y-M),k+=Math.abs(t[f].x-S),C+=Math.abs(t[f].y-O);if(Math.abs(b)<v.EPSILON||Math.abs(x)<v.EPSILON||Math.abs(k)<v.EPSILON||Math.abs(C)<v.EPSILON)return 0;for(b=i/b,x=i/x,k=i/k,C=i/C,u[0]=k,u[1]=0,u[2]=-S*k,u[3]=0,u[4]=C,u[5]=-O*C,u[6]=0,u[7]=0,u[8]=1,h[0]=1/b,h[1]=0,h[2]=w,h[3]=0,h[4]=1/x,h[5]=M,h[6]=0,h[7]=0,h[8]=1,f=81;--f>=0;)d[f]=0;for(f=0;f<i;++f)_=(r[f].x-w)*b,m=(r[f].y-M)*x,g=(t[f].x-S)*k,y=(t[f].y-O)*C,d[0]+=g*g,d[1]+=g*y,d[2]+=g,d[6]+=g*-_*g,d[7]+=g*-_*y,d[8]+=g*-_,d[10]+=y*y,d[11]+=y,d[15]+=y*-_*g,d[16]+=y*-_*y,d[17]+=y*-_,d[20]+=1,d[24]+=-_*g,d[25]+=-_*y,d[26]+=-_,d[30]+=g*g,d[31]+=g*y,d[32]+=g,d[33]+=g*-m*g,d[34]+=g*-m*y,d[35]+=g*-m,d[40]+=y*y,d[41]+=y,d[42]+=y*-m*g,d[43]+=y*-m*y,d[44]+=y*-m,d[50]+=1,d[51]+=-m*g,d[52]+=-m*y,d[53]+=-m,d[60]+=-_*g*-_*g+-m*g*-m*g,d[61]+=-_*g*-_*y+-m*g*-m*y,d[62]+=-_*g*-_+-m*g*-m,d[70]+=-_*y*-_*y+-m*y*-m*y,d[71]+=-_*y*-_+-m*y*-m,d[80]+=-_*-_+-m*-m;for(f=0;f<9;++f)for(c=0;c<f;++c)d[9*f+c]=d[9*c+f];return v.linalg.eigenVV(a,s),l[0]=p[72],l[1]=p[73],l[2]=p[74],l[3]=p[75],l[4]=p[76],l[5]=p[77],l[6]=p[78],l[7]=p[79],l[8]=p[80],v.matmath.multiply_3x3(o,n,o),v.matmath.multiply_3x3(o,o,e),_=1/l[8],l[0]*=_,l[1]*=_,l[2]*=_,l[3]*=_,l[4]*=_,l[5]*=_,l[6]*=_,l[7]*=_,l[8]=1,1},t.prototype.error=function(t,e,n,r,o){for(var i,a,s=0,f=0,c=0,l=0,u=n.data;s<o;++s)i=t[s],a=e[s],f=1/(u[6]*i.x+u[7]*i.y+1),c=(u[0]*i.x+u[1]*i.y+u[2])*f-a.x,l=(u[3]*i.x+u[4]*i.y+u[5])*f-a.y,r[s]=c*c+l*l},t.prototype.check_subset=function(t,e,n){if(4==n){var r=0,o=t[0],i=t[1],a=t[2],s=t[3],f=e[0],c=e[1],l=e[2],u=e[3],h=o.x,d=o.y,p=i.x,_=i.y,m=a.x,g=a.y,y=f.x,b=f.y,x=c.x,w=c.y,M=l.x,k=l.y,C=v.matmath.determinant_3x3(h,d,1,p,_,1,m,g,1),S=v.matmath.determinant_3x3(y,b,1,x,w,1,M,k,1);if(C*S<0&&r++,h=i.x,d=i.y,p=a.x,_=a.y,m=s.x,g=s.y,y=c.x,b=c.y,x=l.x,w=l.y,M=u.x,k=u.y,(C=v.matmath.determinant_3x3(h,d,1,p,_,1,m,g,1))*(S=v.matmath.determinant_3x3(y,b,1,x,w,1,M,k,1))<0&&r++,h=o.x,d=o.y,p=a.x,_=a.y,m=s.x,g=s.y,y=f.x,b=f.y,x=l.x,w=l.y,M=u.x,k=u.y,(C=v.matmath.determinant_3x3(h,d,1,p,_,1,m,g,1))*(S=v.matmath.determinant_3x3(y,b,1,x,w,1,M,k,1))<0&&r++,h=o.x,d=o.y,p=i.x,_=i.y,m=s.x,g=s.y,y=f.x,b=f.y,x=c.x,w=c.y,M=u.x,k=u.y,(C=v.matmath.determinant_3x3(h,d,1,p,_,1,m,g,1))*(S=v.matmath.determinant_3x3(y,b,1,x,w,1,M,k,1))<0&&r++,0!=r&&4!=r)return!1}return!0},t}()}}(),o=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=.5),void 0===n&&(n=.5),void 0===r&&(r=.99),this.size=t,this.thresh=e,this.eps=n,this.prob=r}return t.prototype.update_iters=function(t,e){var n=Math.log(1-this.prob),r=Math.log(1-Math.pow(1-t,this.size));return 0|(r>=0||-n>=e*-r?e:Math.round(n/r))},t}(),i=(e=function(t,e,n,r,o,i,a){for(var s=1e3,f=[],c=0,l=0,u=0,h=0,d=!1;u<s;++u){for(c=0;c<r&&u<s;){for(d=!1,h=0;!d;)for(d=!0,h=f[c]=0|Math.floor(Math.random()*o),l=0;l<c;++l)if(h==f[l]){d=!1;break}i[c]=e[h],a[c]=n[h],t.check_subset(i,a,c+1)?++c:u++}break}return c==r&&u<s},n=function(t,e,n,r,o,i,a,s){var f=0,c=0,l=0,u=i*i;for(t.error(n,r,e,a,o);c<o;++c)l=a[c]<=u,s[c]=l,f+=l;return f},{ransac:function(t,r,o,i,a,s,f,c){if(void 0===c&&(c=1e3),a<t.size)return!1;var l=t.size,u=c,h=0,d=!1,p=[],_=[],m=s.cols,g=s.rows,y=s.type|v.C1_t,b=v.cache.get_buffer(m*g<<3),x=v.cache.get_buffer(a),w=v.cache.get_buffer(a<<2),M=new v.matrix_t(m,g,y,b.data),k=new v.matrix_t(a,1,v.U8C1_t,x.data),C=-1,S=0,O=w.f32;if(a==l){if(r.run(o,i,M,a)<=0)return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!1;if(M.copy_to(s),f)for(;--a>=0;)f.data[a]=1;return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!0}for(;h<u;++h){if(!e(r,o,i,l,a,p,_)){if(0==h)return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!1;break}r.run(p,_,M,l)<=0||(S=n(r,M,o,i,a,t.thresh,O,k.data))>Math.max(C,l-1)&&(M.copy_to(s),C=S,f&&k.copy_to(f),u=t.update_iters((a-S)/a,u),d=!0)}return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),d},lmeds:function(t,r,o,i,a,s,f,c){if(void 0===c&&(c=1e3),a<t.size)return!1;var l=t.size,u=c,h=0,d=!1,p=[],_=[],m=s.cols,g=s.rows,y=s.type|v.C1_t,b=v.cache.get_buffer(m*g<<3),x=v.cache.get_buffer(a),w=v.cache.get_buffer(a<<2),M=new v.matrix_t(m,g,y,b.data),k=new v.matrix_t(a,1,v.U8_t|v.C1_t,x.data),C=0,S=w.f32,O=1e9,E=0,A=0;if(t.eps=.45,u=t.update_iters(t.eps,u),a==l){if(r.run(o,i,M,a)<=0)return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!1;if(M.copy_to(s),f)for(;--a>=0;)f.data[a]=1;return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!0}for(;h<u;++h){if(!e(r,o,i,l,a,p,_)){if(0==h)return v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),!1;break}r.run(p,_,M,l)<=0||(r.error(o,i,M,S,a),(A=v.math.median(S,0,a-1))<O&&(O=A,M.copy_to(s),d=!0))}return d&&(E=2.5*1.4826*(1+5/(a-l))*Math.sqrt(O),E=Math.max(E,.001),C=n(r,s,o,i,a,E,S,k.data),f&&k.copy_to(f),d=C>=l),v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),d}});t.ransac_params_t=o,t.motion_model=r,t.motion_estimator=i}(v),function(t){var e={grayscale:function(t,e,n,r,o){void 0===o&&(o=v.COLOR_RGBA2GRAY);var i=0,a=0,s=0,f=0,c=0,l=0,u=4899,h=9617,d=1868,p=4;o!=v.COLOR_BGRA2GRAY&&o!=v.COLOR_BGR2GRAY||(u=1868,d=4899),o!=v.COLOR_RGB2GRAY&&o!=v.COLOR_BGR2GRAY||(p=3);var _=p<<1,m=3*p|0;r.resize(e,n,1);var g=r.data;for(a=0;a<n;++a,f+=e,s+=e*p){for(i=0,c=s,l=f;i<=e-4;i+=4,c+=p<<2,l+=4)g[l]=t[c]*u+t[c+1]*h+t[c+2]*d+8192>>14,g[l+1]=t[c+p]*u+t[c+p+1]*h+t[c+p+2]*d+8192>>14,g[l+2]=t[c+_]*u+t[c+_+1]*h+t[c+_+2]*d+8192>>14,g[l+3]=t[c+m]*u+t[c+m+1]*h+t[c+m+2]*d+8192>>14;for(;i<e;++i,++l,c+=p)g[l]=t[c]*u+t[c+1]*h+t[c+2]*d+8192>>14}},resample:function(t,e,n,r){var o=t.rows,i=t.cols;o>r&&i>n&&(e.resize(n,r,t.channel),t.type&v.U8_t&&e.type&v.U8_t&&o*i/(r*n)<256?function(t,e,n,r){for(var o=0,i=t.channel,a=t.cols,s=t.rows,f=t.data,c=e.data,l=a/n,u=s/r,h=l*u*65536|0,d=0,p=0,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0,E=0,A=0,R=v.cache.get_buffer(n*i<<2),F=v.cache.get_buffer(n*i<<2),z=v.cache.get_buffer(2*a*3<<2),L=R.i32,U=F.i32,I=z.i32;d<n;d++){for(g=1+(w=d*l)-1e-6|0,y=0|(M=w+l),g=Math.min(g,a-1),y=Math.min(y,a-1),g>w&&(I[x++]=d*i|0,I[x++]=(g-1)*i|0,I[x++]=256*(g-w)|0,o++),_=g;_<y;_++)o++,I[x++]=d*i|0,I[x++]=_*i|0,I[x++]=256;M-y>.001&&(o++,I[x++]=d*i|0,I[x++]=y*i|0,I[x++]=256*(M-y)|0)}for(d=0;d<n*i;d++)L[d]=U[d]=0;for(p=0,m=0;m<s;m++){for(k=a*m,x=0;x<o;x++)for(S=I[3*x],g=I[3*x+1],O=I[3*x+2],b=0;b<i;b++)L[S+b]+=f[k+g+b]*O;if((p+1)*u<=m+1||m==s-1){if(A=256-(E=256*Math.max(m+1-(p+1)*u,0)|0),C=n*p,E<=0)for(d=0;d<n*i;d++)c[C+d]=Math.min(Math.max((U[d]+256*L[d])/h,0),255),U[d]=L[d]=0;else for(d=0;d<n*i;d++)c[C+d]=Math.min(Math.max((U[d]+L[d]*A)/h,0),255),U[d]=L[d]*E,L[d]=0;p++}else for(d=0;d<n*i;d++)U[d]+=256*L[d],L[d]=0}v.cache.put_buffer(F),v.cache.put_buffer(R),v.cache.put_buffer(z)}(t,e,n,r):function(t,e,n,r){for(var o=0,i=t.channel,a=t.cols,s=t.rows,f=t.data,c=e.data,l=a/n,u=s/r,h=1/(l*u),d=0,p=0,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0,E=0,A=0,R=v.cache.get_buffer(n*i<<2),F=v.cache.get_buffer(n*i<<2),z=v.cache.get_buffer(2*a*3<<2),L=R.f32,U=F.f32,I=z.f32;d<n;d++){for(g=1+(w=d*l)-1e-6|0,y=0|(M=w+l),g=Math.min(g,a-1),y=Math.min(y,a-1),g>w&&(o++,I[x++]=(g-1)*i|0,I[x++]=d*i|0,I[x++]=(g-w)*h),_=g;_<y;_++)o++,I[x++]=_*i|0,I[x++]=d*i|0,I[x++]=h;M-y>.001&&(o++,I[x++]=y*i|0,I[x++]=d*i|0,I[x++]=(M-y)*h)}for(d=0;d<n*i;d++)L[d]=U[d]=0;for(p=0,m=0;m<s;m++){for(k=a*m,x=0;x<o;x++)for(g=0|I[3*x],S=0|I[3*x+1],O=I[3*x+2],b=0;b<i;b++)L[S+b]+=f[k+g+b]*O;if((p+1)*u<=m+1||m==s-1){if(A=1-(E=Math.max(m+1-(p+1)*u,0)),C=n*p,Math.abs(E)<.001)for(d=0;d<n*i;d++)c[C+d]=U[d]+L[d],U[d]=L[d]=0;else for(d=0;d<n*i;d++)c[C+d]=U[d]+L[d]*A,U[d]=L[d]*E,L[d]=0;p++}else for(d=0;d<n*i;d++)U[d]+=L[d],L[d]=0}v.cache.put_buffer(F),v.cache.put_buffer(R),v.cache.put_buffer(z)}(t,e,n,r))},box_blur_gray:function(t,e,n,r){void 0===r&&(r=0);var o=t.cols,i=t.rows,a=i<<1,s=o<<1,f=0,c=0,l=0,u=0,h=1+(n<<1)|0,d=n+1|0,p=d+1|0,_=r&v.BOX_BLUR_NOSCALE?1:1/(h*h),m=v.cache.get_buffer(o*i<<2),g=0,y=0,b=0,x=0,w=0,M=m.i32,k=t.data,C=0;for(e.resize(o,i,t.channel),l=0;l<i;++l){for(y=l,g=d*k[b],f=b+1|0,u=b+n|0;f<=u;++f)g+=k[f];for(x=b+d|0,C=k[w=b],c=0;c<n;++c,y+=i)M[y]=g,g+=k[x]-C,x++;for(;c<o-p;c+=2,y+=a)M[y]=g,g+=k[x]-k[w],M[y+i]=g,g+=k[x+1]-k[w+1],x+=2,w+=2;for(;c<o-d;++c,y+=i)M[y]=g,g+=k[x]-k[w],x++,w++;for(C=k[x-1];c<o;++c,y+=i)M[y]=g,g+=C-k[w],w++;b+=o}if(b=0,k=e.data,1==_)for(l=0;l<o;++l){for(y=l,g=d*M[b],f=b+1|0,u=b+n|0;f<=u;++f)g+=M[f];for(x=b+d,C=M[w=b],c=0;c<n;++c,y+=o)k[y]=g,g+=M[x]-C,x++;for(;c<i-p;c+=2,y+=s)k[y]=g,g+=M[x]-M[w],k[y+o]=g,g+=M[x+1]-M[w+1],x+=2,w+=2;for(;c<i-d;++c,y+=o)k[y]=g,g+=M[x]-M[w],x++,w++;for(C=M[x-1];c<i;++c,y+=o)k[y]=g,g+=C-M[w],w++;b+=i}else for(l=0;l<o;++l){for(y=l,g=d*M[b],f=b+1|0,u=b+n|0;f<=u;++f)g+=M[f];for(x=b+d,C=M[w=b],c=0;c<n;++c,y+=o)k[y]=g*_,g+=M[x]-C,x++;for(;c<i-p;c+=2,y+=s)k[y]=g*_,g+=M[x]-M[w],k[y+o]=g*_,g+=M[x+1]-M[w+1],x+=2,w+=2;for(;c<i-d;++c,y+=o)k[y]=g*_,g+=M[x]-M[w],x++,w++;for(C=M[x-1];c<i;++c,y+=o)k[y]=g*_,g+=C-M[w],w++;b+=i}v.cache.put_buffer(m)},gaussian_blur:function(t,e,n,r){void 0===r&&(r=0),void 0===n&&(n=0);var o=(n=0==n?2*Math.max(1,4*r+1-1e-8)+1|0:n)>>1,i=t.cols,a=t.rows,s=t.type,f=s&v.U8_t;e.resize(i,a,t.channel);var c,l,u=t.data,h=e.data,d=n+Math.max(a,i)|0,p=v.cache.get_buffer(d<<2),_=v.cache.get_buffer(n<<2);f?(c=p.i32,l=_.i32):s&v.S32_t?(c=p.i32,l=_.f32):(c=p.f32,l=_.f32),v.math.get_gaussian_kernel(n,r,l,s),f?function(t,e,n,r,o,i,a,s){for(var f=0,c=0,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=i[0],g=0,y=r<<1,b=3*r,x=r<<2;f<o;++f){for(d=e[u],c=0;c<s;++c)t[c]=d;for(c=0;c<=r-2;c+=2)t[c+s]=e[u+c],t[c+s+1]=e[u+c+1];for(;c<r;++c)t[c+s]=e[u+c];for(d=e[u+r-1],c=r;c<s+r;++c)t[c+s]=d;for(c=0;c<=r-4;c+=4){for(d=t[c]*m,p=t[c+1]*m,v=t[c+2]*m,_=t[c+3]*m,l=1;l<a;++l)g=i[l],d+=t[l+c]*g,p+=t[l+c+1]*g,v+=t[l+c+2]*g,_+=t[l+c+3]*g;n[h+c]=Math.min(d>>8,255),n[h+c+1]=Math.min(p>>8,255),n[h+c+2]=Math.min(v>>8,255),n[h+c+3]=Math.min(_>>8,255)}for(;c<r;++c){for(d=t[c]*m,l=1;l<a;++l)d+=t[l+c]*i[l];n[h+c]=Math.min(d>>8,255)}u+=r,h+=r}for(f=0;f<r;++f){for(d=n[f],c=0;c<s;++c)t[c]=d;for(l=f,c=0;c<=o-2;c+=2,l+=y)t[c+s]=n[l],t[c+s+1]=n[l+r];for(;c<o;++c,l+=r)t[c+s]=n[l];for(d=n[(o-1)*r+f],c=o;c<s+o;++c)t[c+s]=d;for(h=f,c=0;c<=o-4;c+=4,h+=x){for(d=t[c]*m,p=t[c+1]*m,v=t[c+2]*m,_=t[c+3]*m,l=1;l<a;++l)g=i[l],d+=t[l+c]*g,p+=t[l+c+1]*g,v+=t[l+c+2]*g,_+=t[l+c+3]*g;n[h]=Math.min(d>>8,255),n[h+r]=Math.min(p>>8,255),n[h+y]=Math.min(v>>8,255),n[h+b]=Math.min(_>>8,255)}for(;c<o;++c,h+=r){for(d=t[c]*m,l=1;l<a;++l)d+=t[l+c]*i[l];n[h]=Math.min(d>>8,255)}}}(c,u,h,i,a,l,n,o):function(t,e,n,r,o,i,a,s){for(var f=0,c=0,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=i[0],g=0,y=r<<1,b=3*r,x=r<<2;f<o;++f){for(d=e[u],c=0;c<s;++c)t[c]=d;for(c=0;c<=r-2;c+=2)t[c+s]=e[u+c],t[c+s+1]=e[u+c+1];for(;c<r;++c)t[c+s]=e[u+c];for(d=e[u+r-1],c=r;c<s+r;++c)t[c+s]=d;for(c=0;c<=r-4;c+=4){for(d=t[c]*m,p=t[c+1]*m,v=t[c+2]*m,_=t[c+3]*m,l=1;l<a;++l)g=i[l],d+=t[l+c]*g,p+=t[l+c+1]*g,v+=t[l+c+2]*g,_+=t[l+c+3]*g;n[h+c]=d,n[h+c+1]=p,n[h+c+2]=v,n[h+c+3]=_}for(;c<r;++c){for(d=t[c]*m,l=1;l<a;++l)d+=t[l+c]*i[l];n[h+c]=d}u+=r,h+=r}for(f=0;f<r;++f){for(d=n[f],c=0;c<s;++c)t[c]=d;for(l=f,c=0;c<=o-2;c+=2,l+=y)t[c+s]=n[l],t[c+s+1]=n[l+r];for(;c<o;++c,l+=r)t[c+s]=n[l];for(d=n[(o-1)*r+f],c=o;c<s+o;++c)t[c+s]=d;for(h=f,c=0;c<=o-4;c+=4,h+=x){for(d=t[c]*m,p=t[c+1]*m,v=t[c+2]*m,_=t[c+3]*m,l=1;l<a;++l)g=i[l],d+=t[l+c]*g,p+=t[l+c+1]*g,v+=t[l+c+2]*g,_+=t[l+c+3]*g;n[h]=d,n[h+r]=p,n[h+y]=v,n[h+b]=_}for(;c<o;++c,h+=r){for(d=t[c]*m,l=1;l<a;++l)d+=t[l+c]*i[l];n[h]=d}}}(c,u,h,i,a,l,n,o),v.cache.put_buffer(p),v.cache.put_buffer(_)},pyrdown:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var o=t.cols,i=o>>1,a=t.rows>>1,s=i-(n<<1),f=a-(r<<1),c=0,l=0,u=n+r*o,h=0,d=0,p=0;e.resize(i,a,t.channel);var v=t.data,_=e.data;for(l=0;l<f;++l){for(h=u,p=d,c=0;c<=s-2;c+=2,p+=2,h+=4)_[p]=v[h]+v[h+1]+v[h+o]+v[h+o+1]+2>>2,_[p+1]=v[h+2]+v[h+3]+v[h+o+2]+v[h+o+3]+2>>2;for(;c<s;++c,++p,h+=2)_[p]=v[h]+v[h+1]+v[h+o]+v[h+o+1]+2>>2;u+=o<<1,d+=i}},scharr_derivatives:function(t,e){var n,r,o,i,a,s,f,c,l=t.cols,u=t.rows,h=l<<1,d=0,p=0,_=0,m=0,g=0,y=0,b=0;e.resize(l,u,2);var x=t.data,w=e.data,M=v.cache.get_buffer(l+2<<2),k=v.cache.get_buffer(l+2<<2);for(t.type&v.U8_t||t.type&v.S32_t?(f=M.i32,c=k.i32):(f=M.f32,c=k.f32);p<u;++p,g+=l){for(m=(p>0?p-1:1)*l|0,y=(p<u-1?p+1:u-2)*l|0,b=p*h|0,d=0,_=1;d<=l-2;d+=2,_+=2)n=x[m+d],r=x[y+d],f[_]=3*(n+r)+10*x[g+d],c[_]=r-n,n=x[m+d+1],r=x[y+d+1],f[_+1]=3*(n+r)+10*x[g+d+1],c[_+1]=r-n;for(;d<l;++d,++_)n=x[m+d],r=x[y+d],f[_]=3*(n+r)+10*x[g+d],c[_]=r-n;for(d=l+1|0,f[0]=f[1],f[d]=f[l],c[0]=c[1],c[d]=c[l],d=0;d<=l-4;d+=4)n=c[d+2],r=c[d+1],o=c[d+3],i=c[d+4],a=f[d+2],s=f[d+3],w[b++]=a-f[d],w[b++]=3*(n+c[d])+10*r,w[b++]=s-f[d+1],w[b++]=3*(o+r)+10*n,w[b++]=f[d+4]-a,w[b++]=3*(i+n)+10*o,w[b++]=f[d+5]-s,w[b++]=3*(c[d+5]+o)+10*i;for(;d<l;++d)w[b++]=f[d+2]-f[d],w[b++]=3*(c[d+2]+c[d])+10*c[d+1]}v.cache.put_buffer(M),v.cache.put_buffer(k)},sobel_derivatives:function(t,e){var n,r,o,i,a,s,f,c,l=t.cols,u=t.rows,h=l<<1,d=0,p=0,_=0,m=0,g=0,y=0,b=0;e.resize(l,u,2);var x=t.data,w=e.data,M=v.cache.get_buffer(l+2<<2),k=v.cache.get_buffer(l+2<<2);for(t.type&v.U8_t||t.type&v.S32_t?(f=M.i32,c=k.i32):(f=M.f32,c=k.f32);p<u;++p,g+=l){for(m=(p>0?p-1:1)*l|0,y=(p<u-1?p+1:u-2)*l|0,b=p*h|0,d=0,_=1;d<=l-2;d+=2,_+=2)n=x[m+d],r=x[y+d],f[_]=n+r+2*x[g+d],c[_]=r-n,n=x[m+d+1],r=x[y+d+1],f[_+1]=n+r+2*x[g+d+1],c[_+1]=r-n;for(;d<l;++d,++_)n=x[m+d],r=x[y+d],f[_]=n+r+2*x[g+d],c[_]=r-n;for(d=l+1|0,f[0]=f[1],f[d]=f[l],c[0]=c[1],c[d]=c[l],d=0;d<=l-4;d+=4)n=c[d+2],r=c[d+1],o=c[d+3],i=c[d+4],a=f[d+2],s=f[d+3],w[b++]=a-f[d],w[b++]=n+c[d]+2*r,w[b++]=s-f[d+1],w[b++]=o+r+2*n,w[b++]=f[d+4]-a,w[b++]=i+n+2*o,w[b++]=f[d+5]-s,w[b++]=c[d+5]+o+2*i;for(;d<l;++d)w[b++]=f[d+2]-f[d],w[b++]=c[d+2]+c[d]+2*c[d+1]}v.cache.put_buffer(M),v.cache.put_buffer(k)},compute_integral_image:function(t,e,n,r){var o=0|t.cols,i=0|t.rows,a=t.data,s=o+1|0,f=0,c=0,l=0,u=0,h=0,d=0,p=0,v=0;if(e&&n){for(;h<s;++h)e[h]=0,n[h]=0;for(l=s+1|0,u=1,h=0,v=0;h<i;++h,++l,++u){for(f=c=0,d=0;d<=o-2;d+=2,v+=2,l+=2,u+=2)f+=p=a[v],c+=p*p,e[l]=e[u]+f,n[l]=n[u]+c,f+=p=a[v+1],c+=p*p,e[l+1]=e[u+1]+f,n[l+1]=n[u+1]+c;for(;d<o;++d,++v,++l,++u)f+=p=a[v],c+=p*p,e[l]=e[u]+f,n[l]=n[u]+c}}else if(e){for(;h<s;++h)e[h]=0;for(l=s+1|0,u=1,h=0,v=0;h<i;++h,++l,++u){for(f=0,d=0;d<=o-2;d+=2,v+=2,l+=2,u+=2)f+=a[v],e[l]=e[u]+f,f+=a[v+1],e[l+1]=e[u+1]+f;for(;d<o;++d,++v,++l,++u)f+=a[v],e[l]=e[u]+f}}else if(n){for(;h<s;++h)n[h]=0;for(l=s+1|0,u=1,h=0,v=0;h<i;++h,++l,++u){for(c=0,d=0;d<=o-2;d+=2,v+=2,l+=2,u+=2)c+=(p=a[v])*p,n[l]=n[u]+c,c+=(p=a[v+1])*p,n[l+1]=n[u+1]+c;for(;d<o;++d,++v,++l,++u)c+=(p=a[v])*p,n[l]=n[u]+c}}if(r){for(h=0;h<s;++h)r[h]=0;for(l=s+1|0,u=0,h=0,v=0;h<i;++h,++l,++u){for(d=0;d<=o-2;d+=2,v+=2,l+=2,u+=2)r[l]=a[v]+r[u],r[l+1]=a[v+1]+r[u+1];for(;d<o;++d,++v,++l,++u)r[l]=a[v]+r[u]}for(l=s+o|0,u=o,h=0;h<i;++h,l+=s,u+=s)r[l]+=r[u];for(d=o-1;d>0;--d)for(u=(l=d+i*s)-s,h=i;h>0;--h,l-=s,u-=s)r[l]+=r[u]+r[u+1]}},equalize_histogram:function(t,e){var n=t.cols,r=t.rows,o=t.data;e.resize(n,r,t.channel);var i,a,s=e.data,f=n*r,c=0,l=0,u=v.cache.get_buffer(1024);for(i=u.i32;c<256;++c)i[c]=0;for(c=0;c<f;++c)++i[o[c]];for(l=i[0],c=1;c<256;++c)l=i[c]+=l;for(a=255/f,c=0;c<f;++c)s[c]=i[o[c]]*a+.5|0;v.cache.put_buffer(u)},canny:function(t,e,n,r){var o=t.cols,i=t.rows;t.data,e.resize(o,i,t.channel);var a=e.data,s=0,f=0,c=0,l=o<<1,u=0,h=0,d=0,p=0,_=0,m=0,g=0,y=0,b=v.cache.get_buffer(i*l<<2),x=v.cache.get_buffer(3*(o+2)<<2),w=v.cache.get_buffer((i+2)*(o+2)<<2),M=v.cache.get_buffer(i*o<<2),k=x.i32,C=w.i32,S=M.i32,O=b.i32,E=new v.matrix_t(o,i,v.S32C2_t,b.data),A=1,R=o+2+1|0,F=2*(o+2)+1|0,z=o+2|0,L=z+1|0,U=0;for(this.sobel_derivatives(t,E),n>r&&(s=n,n=r,r=s),s=3*(o+2)|0;--s>=0;)k[s]=0;for(s=(i+2)*(o+2)|0;--s>=0;)C[s]=0;for(;f<o;++f,c+=2)p=O[c],_=O[c+1],k[R+f]=(p^p>>31)-(p>>31)+((_^_>>31)-(_>>31));for(s=1;s<=i;++s,c+=l){if(s==i)for(f=F+o;--f>=F;)k[f]=0;else for(f=0;f<o;f++)p=O[c+(f<<1)],_=O[c+(f<<1)+1],k[F+f]=(p^p>>31)-(p>>31)+((_^_>>31)-(_>>31));for(u=c-l|0,C[L-1]=0,h=0,f=0;f<o;++f,u+=2){if((d=k[R+f])>n)if(m=(p=O[u])^(_=O[u+1]),_=(_^_>>31)-(_>>31)|0,y=(g=13573*(p=(p^p>>31)-(p>>31)|0))+(p+p<<15),(_<<=15)<g){if(d>k[R+f-1]&&d>=k[R+f+1]){d>r&&!h&&2!=C[L+f-z]?(C[L+f]=2,h=1,S[U++]=L+f):C[L+f]=1;continue}}else if(_>y){if(d>k[A+f]&&d>=k[F+f]){d>r&&!h&&2!=C[L+f-z]?(C[L+f]=2,h=1,S[U++]=L+f):C[L+f]=1;continue}}else if(d>k[A+f-(m=m<0?-1:1)]&&d>k[F+f+m]){d>r&&!h&&2!=C[L+f-z]?(C[L+f]=2,h=1,S[U++]=L+f):C[L+f]=1;continue}C[L+f]=0,h=0}C[L+o]=0,L+=z,f=A,A=R,R=F,F=f}for(f=L-z-1,s=0;s<z;++s,++f)C[f]=0;for(;U>0;)L=S[--U],1==C[L-=z+1]&&(C[L]=2,S[U++]=L),1==C[L+=1]&&(C[L]=2,S[U++]=L),1==C[L+=1]&&(C[L]=2,S[U++]=L),1==C[L+=z]&&(C[L]=2,S[U++]=L),1==C[L-=2]&&(C[L]=2,S[U++]=L),1==C[L+=z]&&(C[L]=2,S[U++]=L),1==C[L+=1]&&(C[L]=2,S[U++]=L),1==C[L+=1]&&(C[L]=2,S[U++]=L);for(L=z+1,A=0,s=0;s<i;++s,L+=z)for(f=0;f<o;++f)a[A++]=255*(2==C[L+f]);v.cache.put_buffer(b),v.cache.put_buffer(x),v.cache.put_buffer(w),v.cache.put_buffer(M)},warp_perspective:function(t,e,n,r){void 0===r&&(r=0);for(var o=0|t.cols,i=0|t.rows,a=0|e.cols,s=0|e.rows,f=t.data,c=e.data,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=n.data,S=C[0],O=C[1],E=C[2],A=C[3],R=C[4],F=C[5],z=C[6],L=C[7],U=C[8],I=0;u<s;++u)for(m=O*u+E,g=R*u+F,y=L*u+U,l=0;l<a;++l,++I,m+=S,g+=A,y+=z)d=0|(v=m*(b=1/y)),p=0|(_=g*b),v>0&&_>0&&d<o-1&&p<i-1?(x=Math.max(v-d,0),w=Math.max(_-p,0),M=f[h=o*p+d|0]+x*(f[h+1]-f[h]),k=f[h+o]+x*(f[h+o+1]-f[h+o]),c[I]=M+w*(k-M)):c[I]=r},warp_affine:function(t,e,n,r){void 0===r&&(r=0);for(var o=t.cols,i=t.rows,a=e.cols,s=e.rows,f=t.data,c=e.data,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=0,g=0,y=0,b=0,x=n.data,w=x[0],M=x[1],k=x[2],C=x[3],S=x[4],O=x[5],E=0;u<s;++u)for(v=M*u+k,_=S*u+O,l=0;l<a;++l,++E,v+=w,_+=C)p=0|_,(d=0|v)>=0&&p>=0&&d<o-1&&p<i-1?(m=v-d,g=_-p,y=f[h=o*p+d]+m*(f[h+1]-f[h]),b=f[h+o]+m*(f[h+o+1]-f[h+o]),c[E]=y+g*(b-y)):c[E]=r},skindetector:function(t,e){for(var n,r,o,i,a=t.width*t.height;a--;)i=4*a,n=t.data[i],r=t.data[i+1],o=t.data[i+2],n>95&&r>40&&o>20&&n>r&&n>o&&n-Math.min(r,o)>15&&Math.abs(n-r)>15?e[a]=255:e[a]=0}};t.imgproc=e}(v),function(t){var e=function(){var t=new Int32Array([0,3,1,3,2,2,3,1,3,0,3,-1,2,-2,1,-3,0,-3,-1,-3,-2,-2,-3,-1,-3,0,-3,1,-2,2,-1,3]),e=new Uint8Array(512),n=new Int32Array(25),r=new Int32Array(25),o=function(t,e,n,r,o){for(var i=0,a=t[e],s=o,f=0,c=0,l=0;i<25;++i)r[i]=a-t[e+n[i]];for(i=0;i<16;i+=2)f=Math.min(r[i+1],r[i+2]),(f=Math.min(f,r[i+3]))<=s||(f=Math.min(f,r[i+4]),f=Math.min(f,r[i+5]),f=Math.min(f,r[i+6]),f=Math.min(f,r[i+7]),f=Math.min(f,r[i+8]),s=Math.max(s,Math.min(f,r[i])),s=Math.max(s,Math.min(f,r[i+9])));for(c=-s,i=0;i<16;i+=2)l=Math.max(r[i+1],r[i+2]),l=Math.max(l,r[i+3]),l=Math.max(l,r[i+4]),(l=Math.max(l,r[i+5]))>=c||(l=Math.max(l,r[i+6]),l=Math.max(l,r[i+7]),l=Math.max(l,r[i+8]),c=Math.min(c,Math.max(l,r[i])),c=Math.min(c,Math.max(l,r[i+9])));return-c-1},i=20;return{set_threshold:function(t){i=Math.min(Math.max(t,0),255);for(var n=-255;n<=255;++n)e[n+255]=n<-i?1:n>i?2:0;return i},detect:function(a,s,f){void 0===f&&(f=3);var c,l=a.data,u=a.cols,h=a.rows,d=0,p=0,_=0,m=0,g=0,y=v.cache.get_buffer(3*u),b=v.cache.get_buffer(3*(u+1)<<2),x=y.u8,w=b.i32,M=n,k=r,C=Math.max(3,f),S=Math.min(h-2,h-f),O=Math.max(3,f),E=Math.min(u-3,u-f),A=0,R=0,F=o,z=e,L=i,U=0,I=0,P=0,N=0,T=0,V=0,D=0,j=0,q=0,B=0,W=0,$=0;!function(e,n,r){for(var o=0,i=t;o<r;++o)e[o]=i[o<<1]+i[1+(o<<1)]*n;for(;o<25;++o)e[o]=e[o-r]}(M,u,16);var G=M[0],H=M[1],Y=M[2],K=M[3],J=M[4],Q=M[5],X=M[6],Z=M[7],tt=M[8],et=M[9],nt=M[10],rt=M[11],ot=M[12],it=M[13],at=M[14],st=M[15];for(d=0;d<3*u;++d)x[d]=0;for(d=C;d<S;++d){for(D=d*u+O|0,V=(g=(d-3)%3)*u|0,T=g*(u+1)|0,p=0;p<u;++p)x[V+p]=0;if(N=0,d<S-1)for(p=O;p<E;++p,++D)if(0!=(P=z[(I=255-(U=l[D]))+l[D+G]]|z[I+l[D+tt]])&&(P&=z[I+l[D+Y]]|z[I+l[D+nt]],P&=z[I+l[D+J]]|z[I+l[D+ot]],0!=(P&=z[I+l[D+X]]|z[I+l[D+at]]))){if(P&=z[I+l[D+H]]|z[I+l[D+et]],P&=z[I+l[D+K]]|z[I+l[D+rt]],P&=z[I+l[D+Q]]|z[I+l[D+it]],1&(P&=z[I+l[D+Z]]|z[I+l[D+st]]))for(m=U-L,A=0,_=0;_<25;++_)if(l[D+M[_]]<m){if(++A>8){w[T+ ++N]=p,x[V+p]=F(l,D,M,k,L);break}}else A=0;if(2&P)for(m=U+L,A=0,_=0;_<25;++_)if(l[D+M[_]]>m){if(++A>8){w[T+ ++N]=p,x[V+p]=F(l,D,M,k,L);break}}else A=0}if(w[T+u]=N,d!=C)for(j=(g=(d-4+3)%3)*u|0,T=g*(u+1)|0,q=(g=(d-5+3)%3)*u|0,N=w[T+u],_=0;_<N;++_)B=(p=w[T+_])+1|0,W=p-1|0,($=x[j+p])>x[j+B]&&$>x[j+W]&&$>x[q+W]&&$>x[q+p]&&$>x[q+B]&&$>x[V+W]&&$>x[V+p]&&$>x[V+B]&&((c=s[R]).x=p,c.y=d-1,c.score=$,R++)}return v.cache.put_buffer(y),v.cache.put_buffer(b),R}}}();t.fast_corners=e,e.set_threshold(20)}(v),function(t){var e=function(){var t=function(t,e,n,r,o,i,a){var s=-2*t[e]+t[e+r]+t[e-r],f=-2*t[e]+t[e+o]+t[e-o],c=t[e+i]+t[e-i]-t[e+a]-t[e-a],l=0|Math.sqrt((s-f)*(s-f)+4*c*c);return Math.min(Math.abs(n-l),Math.abs(-(n+l)))};return{laplacian_threshold:30,min_eigen_value_threshold:25,detect:function(e,n,r){void 0===r&&(r=5);var o,i=0,a=0,s=e.cols,f=e.rows,c=e.data,l=5*s|0,u=3+3*s|0,h=3-3*s|0,d=v.cache.get_buffer(s*f<<2),p=d.i32,_=0,m=0,g=0,y=0,b=0,x=this.laplacian_threshold,w=this.min_eigen_value_threshold,M=0|Math.max(5,r),k=0|Math.max(3,r),C=0|Math.min(s-5,s-r),S=0|Math.min(f-3,f-r);for(i=s*f;--i>=0;)p[i]=0;for(function(t,e,n,r,o,i,a,s,f,c){var l=0,u=0,h=s*n+a|0,d=h;for(l=s;l<c;++l,d=h+=n)for(u=a;u<f;++u,++d)e[d]=-4*t[d]+t[d+o]+t[d-o]+t[d+i]+t[d-i]}(c,p,s,0,5,l,M,k,C,S),m=k*s+M|0,a=k;a<S;++a,m+=s)for(i=M,g=m;i<C;++i,++g)((_=p[g])<-x&&_<p[g-1]&&_<p[g+1]&&_<p[g-s]&&_<p[g+s]&&_<p[g-s-1]&&_<p[g+s-1]&&_<p[g-s+1]&&_<p[g+s+1]||_>x&&_>p[g-1]&&_>p[g+1]&&_>p[g-s]&&_>p[g+s]&&_>p[g-s-1]&&_>p[g+s-1]&&_>p[g-s+1]&&_>p[g+s+1])&&(y=t(c,g,_,5,l,u,h))>w&&((o=n[b]).x=i,o.y=a,o.score=y,++b,++i,++g);return v.cache.put_buffer(d),b}}}();t.yape06=e}(v),function(t){var e=function(){var t=function(t,e,n){var r=0;return 0!=t[e+1]&&r++,0!=t[e-1]&&r++,0!=t[e+n]&&r++,0!=t[e+n+1]&&r++,0!=t[e+n-1]&&r++,0!=t[e-n]&&r++,0!=t[e-n+1]&&r++,0!=t[e-n-1]&&r++,r},e=function(t,e,n,r,o){var i,a;if(n>0)for(e-=r*o,a=-o;a<=o;++a){for(i=-o;i<=o;++i)if(t[e+i]>n)return!1;e+=r}else for(e-=r*o,a=-o;a<=o;++a){for(i=-o;i<=o;++i)if(t[e+i]<n)return!1;e+=r}return!0},n=function(t,e,n,r,o,i,a,s){var f=0,c=0,l=a-1|0,u=0,h=0,d=0,p=0,v=0;if((u=t[e+i[c]])<=o)if(u>=r)if((h=t[e+i[l]])<=o){if(h>=r)return void(n[e]=0);if((d=t[e+i[++l]])>o)if((p=t[e+i[++l]])>o)v=3;else{if(!(p<r))return void(n[e]=0);v=6}else if((p=t[e+i[++l]])>o)v=7;else{if(!(p<r))return void(n[e]=0);v=2}}else if((d=t[e+i[++l]])>o)if((p=t[e+i[++l]])>o)v=3;else{if(!(p<r))return void(n[e]=0);v=6}else{if(!(d<r))return void(n[e]=0);if((p=t[e+i[++l]])>o)v=7;else{if(!(p<r))return void(n[e]=0);v=2}}else{if((h=t[e+i[l]])>o)return void(n[e]=0);if((d=t[e+i[++l]])>o)return void(n[e]=0);if((p=t[e+i[++l]])>o)return void(n[e]=0);v=1}else{if((h=t[e+i[l]])<r)return void(n[e]=0);if((d=t[e+i[++l]])<r)return void(n[e]=0);if((p=t[e+i[++l]])<r)return void(n[e]=0);v=0}for(c=1;c<=a;c++)switch(u=t[e+i[c]],v){case 0:if(u>o){if(d=p,(p=t[e+i[++l]])<r)return void(n[e]=0);f-=u+d,v=0;break}if(u<r){if(d>o)return void(n[e]=0);if(p>o)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])>o)return void(n[e]=0);f-=u+d,v=8;break}if(d<=o)return void(n[e]=0);if(p<=o)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])>o){f-=u+d,v=3;break}if(p<r){f-=u+d,v=6;break}return void(n[e]=0);case 1:if(u<r){if(d=p,(p=t[e+i[++l]])>o)return void(n[e]=0);f-=u+d,v=1;break}if(u>o){if(d<r)return void(n[e]=0);if(p<r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])<r)return void(n[e]=0);f-=u+d,v=9;break}if(d>=r)return void(n[e]=0);if(p>=r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])<r){f-=u+d,v=2;break}if(p>o){f-=u+d,v=7;break}return void(n[e]=0);case 2:if(u>o)return void(n[e]=0);if(d=p,p=t[e+i[++l]],u<r){if(p>o)return void(n[e]=0);f-=u+d,v=4;break}if(p>o){f-=u+d,v=7;break}if(p<r){f-=u+d,v=2;break}return void(n[e]=0);case 3:if(u<r)return void(n[e]=0);if(d=p,p=t[e+i[++l]],u>o){if(p<r)return void(n[e]=0);f-=u+d,v=5;break}if(p>o){f-=u+d,v=3;break}if(p<r){f-=u+d,v=6;break}return void(n[e]=0);case 4:if(u>o)return void(n[e]=0);if(u<r){if(d=p,(p=t[e+i[++l]])>o)return void(n[e]=0);f-=u+d,v=1;break}if(p>=r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])<r){f-=u+d,v=2;break}if(p>o){f-=u+d,v=7;break}return void(n[e]=0);case 5:if(u<r)return void(n[e]=0);if(u>o){if(d=p,(p=t[e+i[++l]])<r)return void(n[e]=0);f-=u+d,v=0;break}if(p<=o)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])>o){f-=u+d,v=3;break}if(p<r){f-=u+d,v=6;break}return void(n[e]=0);case 7:if(u>o)return void(n[e]=0);if(u<r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])>o){f-=u+d,v=3;break}if(p<r){f-=u+d,v=6;break}return void(n[e]=0);case 6:if(u>o)return void(n[e]=0);if(u<r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])<r){f-=u+d,v=2;break}if(p>o){f-=u+d,v=7;break}return void(n[e]=0);case 8:if(u>o){if(p<r)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])<r)return void(n[e]=0);f-=u+d,v=9;break}if(u<r){if(d=p,(p=t[e+i[++l]])>o)return void(n[e]=0);f-=u+d,v=1;break}return void(n[e]=0);case 9:if(u<r){if(p>o)return void(n[e]=0);if(d=p,(p=t[e+i[++l]])>o)return void(n[e]=0);f-=u+d,v=8;break}if(u>o){if(d=p,(p=t[e+i[++l]])<r)return void(n[e]=0);f-=u+d,v=0;break}return void(n[e]=0)}n[e]=f+s*t[e]},r=function(t,e,n){this.dirs=new Int32Array(1024),this.dirs_count=0|function(t,e,n){var r,o,i=0;for(r=n,o=0;o<r;o++,i++)r=Math.sqrt(n*n-o*o)+.5|0,e[i]=r+t*o;for(r--;r<o&&r>=0;r--,i++)o=Math.sqrt(n*n-r*r)+.5|0,e[i]=r+t*o;for(;-r<o;r--,i++)o=Math.sqrt(n*n-r*r)+.5|0,e[i]=r+t*o;for(o--;o>=0;o--,i++)r=-Math.sqrt(n*n-o*o)-.5|0,e[i]=r+t*o;for(;o>r;o--,i++)r=-Math.sqrt(n*n-o*o)-.5|0,e[i]=r+t*o;for(r++;r<=0;r++,i++)o=-Math.sqrt(n*n-r*r)-.5|0,e[i]=r+t*o;for(;r<-o;r++,i++)o=-Math.sqrt(n*n-r*r)-.5|0,e[i]=r+t*o;for(o++;o<0;o++,i++)r=Math.sqrt(n*n-o*o)+.5|0,e[i]=r+t*o;return e[i]=e[0],e[i+1]=e[1],i}(t,this.dirs,n),this.scores=new Int32Array(t*e),this.radius=0|n};return{level_tables:[],tau:7,init:function(t,e,n,o){var i;for(void 0===o&&(o=1),n=Math.min(n,7),n=Math.max(n,3),i=0;i<o;++i)this.level_tables[i]=new r(t>>i,e>>i,n)},detect:function(r,o,i){void 0===i&&(i=4);var a,s=this.level_tables[0],f=0|s.radius,c=f-1|0,l=s.dirs,u=0|s.dirs_count,h=u>>1,d=r.data,p=0|r.cols,v=0|r.rows,_=p>>1,m=s.scores,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0|this.tau,O=0,E=0|Math.max(f+1,i),A=0|Math.max(f+1,i),R=0|Math.min(p-f-2,p-i),F=0|Math.min(v-f-2,v-i);for(b=A*p+E|0,y=A;y<F;++y,b+=p)for(g=E,x=b;g<R;++g,++x)w=d[x]+S,(M=d[x]-S)<d[x+f]&&d[x+f]<w&&M<d[x-f]&&d[x-f]<w?m[x]=0:n(d,x,m,M,w,l,h,u);for(b=A*p+E|0,y=A;y<F;++y,b+=p)for(g=E,x=b;g<R;++g,++x)C=m[x],(k=Math.abs(C))<5?(++g,++x):t(m,x,p)>=3&&e(m,x,C,_,f)&&((a=o[O]).x=g,a.y=y,a.score=k,++O,g+=c,x+=c);return O}}}();t.yape=e}(v),function(t){var e=function(){var t=new Int32Array([8,-3,9,5,4,2,7,-12,-11,9,-8,2,7,-12,12,-13,2,-13,2,12,1,-7,1,6,-2,-10,-2,-4,-13,-13,-11,-8,-13,-3,-12,-9,10,4,11,9,-13,-8,-8,-9,-11,7,-9,12,7,7,12,6,-4,-5,-3,0,-13,2,-12,-3,-9,0,-7,5,12,-6,12,-1,-3,6,-2,12,-6,-13,-4,-8,11,-13,12,-8,4,7,5,1,5,-3,10,-3,3,-7,6,12,-8,-7,-6,-2,-2,11,-1,-10,-13,12,-8,10,-7,3,-5,-3,-4,2,-3,7,-10,-12,-6,11,5,-12,6,-7,5,-6,7,-1,1,0,4,-5,9,11,11,-13,4,7,4,12,2,-1,4,4,-4,-12,-2,7,-8,-5,-7,-10,4,11,9,12,0,-8,1,-13,-13,-2,-8,2,-3,-2,-2,3,-6,9,-4,-9,8,12,10,7,0,9,1,3,7,-5,11,-10,-13,-6,-11,0,10,7,12,1,-6,-3,-6,12,10,-9,12,-4,-13,8,-8,-12,-13,0,-8,-4,3,3,7,8,5,7,10,-7,-1,7,1,-12,3,-10,5,6,2,-4,3,-10,-13,0,-13,5,-13,-7,-12,12,-13,3,-11,8,-7,12,-4,7,6,-10,12,8,-9,-1,-7,-6,-2,-5,0,12,-12,5,-7,5,3,-10,8,-13,-7,-7,-4,5,-3,-2,-1,-7,2,9,5,-11,-11,-13,-5,-13,-1,6,0,-1,5,-3,5,2,-4,-13,-4,12,-9,-6,-9,6,-12,-10,-8,-4,10,2,12,-3,7,12,12,12,-7,-13,-6,5,-4,9,-3,4,7,-1,12,2,-7,6,-5,1,-13,11,-12,5,-3,7,-2,-6,7,-8,12,-7,-13,-7,-11,-12,1,-3,12,12,2,-6,3,0,-4,3,-2,-13,-1,-13,1,9,7,1,8,-6,1,-1,3,12,9,1,12,6,-1,-9,-1,3,-13,-13,-10,5,7,7,10,12,12,-5,12,9,6,3,7,11,5,-13,6,10,2,-12,2,3,3,8,4,-6,2,6,12,-13,9,-12,10,3,-8,4,-7,9,-11,12,-4,-6,1,12,2,-8,6,-9,7,-4,2,3,3,-2,6,3,11,0,3,-3,8,-8,7,8,9,3,-11,-5,-6,-4,-10,11,-5,10,-5,-8,-3,12,-10,5,-9,0,8,-1,12,-6,4,-6,6,-11,-10,12,-8,7,4,-2,6,7,-2,0,-2,12,-5,-8,-5,2,7,-6,10,12,-9,-13,-8,-8,-5,-13,-5,-2,8,-8,9,-13,-9,-11,-9,0,1,-8,1,-2,7,-4,9,1,-2,1,-1,-4,11,-6,12,-11,-12,-9,-6,4,3,7,7,12,5,5,10,8,0,-4,2,8,-9,12,-5,-13,0,7,2,12,-1,2,1,7,5,11,7,-9,3,5,6,-8,-13,-4,-8,9,-5,9,-3,-3,-4,-7,-3,-12,6,5,8,0,-7,6,-6,12,-13,6,-5,-2,1,-10,3,10,4,1,8,-4,-2,-2,2,-13,2,-12,12,12,-2,-13,0,-6,4,1,9,3,-6,-10,-3,-5,-3,-13,-1,1,7,5,12,-11,4,-2,5,-7,-13,9,-9,-5,7,1,8,6,7,-8,7,6,-7,-4,-7,1,-8,11,-7,-8,-13,6,-12,-8,2,4,3,9,10,-5,12,3,-6,-5,-6,7,8,-3,9,-8,2,-12,2,8,-11,-2,-10,3,-12,-13,-7,-9,-11,0,-10,-5,5,-3,11,8,-2,-13,-1,12,-1,-8,0,9,-13,-11,-12,-5,-10,-2,-10,11,-3,9,-2,-13,2,-3,3,2,-9,-13,-4,0,-4,6,-3,-10,-4,12,-2,-7,-6,-11,-4,9,6,-3,6,11,-13,11,-5,5,11,11,12,6,7,-5,12,-2,-1,12,0,7,-4,-8,-3,-2,-7,1,-6,7,-13,-12,-8,-13,-7,-2,-6,-8,-8,5,-6,-9,-5,-1,-4,5,-13,7,-8,10,1,5,5,-13,1,0,10,-13,9,12,10,-1,5,-8,10,-9,-1,11,1,-13,-9,-3,-6,2,-1,-10,1,12,-13,1,-8,-10,8,-11,10,-6,2,-13,3,-6,7,-13,12,-9,-10,-10,-5,-7,-10,-8,-8,-13,4,-6,8,5,3,12,8,-13,-4,2,-3,-3,5,-13,10,-12,4,-13,5,-1,-9,9,-4,3,0,3,3,-9,-12,1,-6,1,3,2,4,-8,-10,-10,-10,9,8,-13,12,12,-8,-12,-6,-5,2,2,3,7,10,6,11,-8,6,8,8,-12,-7,10,-6,5,-3,-9,-3,9,-1,-13,-1,5,-3,-7,-3,4,-8,-2,-8,3,4,2,12,12,2,-5,3,11,6,-9,11,-13,3,-1,7,12,11,-1,12,4,-3,0,-3,6,4,-11,4,12,2,-4,2,1,-10,-6,-8,1,-13,7,-11,1,-13,12,-11,-13,6,0,11,-13,0,-1,1,4,-13,3,-9,-2,-9,8,-6,-3,-13,-6,-8,-2,5,-9,8,10,2,7,3,-9,-1,-6,-1,-1,9,5,11,-2,11,-3,12,-8,3,0,3,5,-1,4,0,10,3,-6,4,5,-13,0,-10,5,5,8,12,11,8,9,9,-6,7,-4,8,-12,-10,4,-10,9,7,3,12,4,9,-7,10,-2,7,0,12,-2,-1,-6,0,-11]),e=new v.matrix_t(3,3,v.F32_t|v.C1_t),n=new v.matrix_t(32,32,v.U8_t|v.C1_t),r=function(t,n,r,o,i,a){var s=Math.cos(r),f=Math.sin(r);e.data[0]=s,e.data[1]=-f,e.data[2]=(-s+f)*a*.5+o,e.data[3]=f,e.data[4]=s,e.data[5]=(-f-s)*a*.5+i,v.imgproc.warp_affine(t,n,e,128)};return{describe:function(e,o,i,a){var s=0,f=0,c=0,l=0,u=0,h=0,d=0,p=0,_=(e.data,e.cols,e.rows,n.data),m=528,g=0;a.type&v.U8_t?a.resize(32,i,1):(a.type=v.U8_t,a.cols=32,a.rows=i,a.channel=1,a.allocate());var y=a.data,b=0;for(s=0;s<i;++s){for(c=o[s].x,l=o[s].y,u=o[s].angle,r(e,n,u,c,l,32),g=0,f=0;f<32;++f)p=(h=_[m+32*t[g+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]])|0,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<1,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<2,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<3,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<4,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<5,p|=((h=_[m+32*t[(g+=2)+1]+t[g]])<(d=_[m+32*t[(g+=2)+1]+t[g]]))<<6,h=_[m+32*t[(g+=2)+1]+t[g]],d=_[m+32*t[(g+=2)+1]+t[g]],g+=2,p|=(h<d)<<7,y[b+f]=p;b+=32}}}}();t.orb=e}(v),function(t){var e=function(){var t=v.imgproc.scharr_derivatives;return{track:function(e,n,r,o,i,a,s,f,c,l){void 0===s&&(s=30),void 0===f&&(f=new Uint8Array(i)),void 0===c&&(c=.01),void 0===l&&(l=1e-4);var u=.5*(a-1),h=a*a|0,d=h<<1,p=e.data,_=n.data,m=p[0].data,g=_[0].data,y=p[0].cols,b=p[0].rows,x=0,w=0,M=v.cache.get_buffer(h<<2),k=v.cache.get_buffer(d<<2),C=v.cache.get_buffer(b*(y<<1)<<2),S=new v.matrix_t(y,b,v.S32C2_t,C.data),O=M.i32,E=k.i32,A=C.i32,R=0,F=0,z=0,L=0,U=0,I=0,P=0,N=0,T=0,V=0,D=0,j=0,q=0,B=0,W=0,$=0,G=0,H=0,Y=0,K=0,J=0,Q=0,X=0,Z=0,tt=0,et=0,nt=0,rt=0,ot=0,it=0,at=0,st=0,ft=16384,ct=1/(1<<20),lt=0,ut=0,ht=0,dt=0,pt=0,vt=0,_t=0,mt=0,gt=0,yt=0,bt=0;for(c*=c;K<i;++K)f[K]=1;var xt=e.levels-1|0;for(Z=xt;Z>=0;--Z)for(P=1/(1<<Z),w=b>>Z,R=(x=y>>Z)<<1,m=p[Z].data,g=_[Z].data,nt=x-a|0,rt=w-a|0,t(p[Z],S),tt=0;tt<i;++tt)if(J=(K=tt<<1)+1,N=r[K]*P,T=r[J]*P,Z==xt?(V=N,D=T):(V=2*o[K],D=2*o[J]),o[K]=V,o[J]=D,0==(Q=($=0|(N-=u))<=0|$>=nt|(G=0|(T-=u))<=0|G>=rt)){for(dt=ft-(lt=(1-(ot=N-$))*(1-(it=T-G))*ft+.5|0)-(ut=ot*(1-it)*ft+.5|0)-(ht=(1-ot)*it*ft+.5|0),mt=0,gt=0,yt=0,X=0;X<a;++X)for(z=(F=(X+G)*x+$|0)<<1,U=(L=X*a|0)<<1,Q=0;Q<a;++Q,++F,++L,z+=2)pt=(pt=m[F]*lt+m[F+1]*ut+m[F+x]*ht+m[F+x+1]*dt)+256>>9,vt=(vt=A[z]*lt+A[z+2]*ut+A[z+R]*ht+A[z+R+2]*dt)+8192>>14,_t=(_t=A[z+1]*lt+A[z+3]*ut+A[z+R+1]*ht+A[z+R+3]*dt)+8192>>14,O[L]=pt,E[U++]=vt,E[U++]=_t,mt+=vt*vt,gt+=vt*_t,yt+=_t*_t;if(bt=(mt*=ct)*(yt*=ct)-(gt*=ct)*gt,(yt+mt-Math.sqrt((mt-yt)*(mt-yt)+4*gt*gt))/d<l||bt<1.1920929e-7)0==Z&&(f[tt]=0);else for(bt=1/bt,V-=u,D-=u,j=0,q=0,et=0;et<s;++et){if(0!=(Q=(H=0|V)<=0|H>=nt|(Y=0|D)<=0|Y>=rt)){0==Z&&(f[tt]=0);break}for(dt=ft-(lt=(1-(ot=V-H))*(1-(it=D-Y))*ft+.5|0)-(ut=ot*(1-it)*ft+.5|0)-(ht=(1-ot)*it*ft+.5|0),at=0,st=0,X=0;X<a;++X)for(I=(X+Y)*x+H|0,U=(L=X*a|0)<<1,Q=0;Q<a;++Q,++I,++L)pt=(pt=g[I]*lt+g[I+1]*ut+g[I+x]*ht+g[I+x+1]*dt)+256>>9,at+=(pt-=O[L])*E[U++],st+=pt*E[U++];if(V+=B=(gt*(st*=ct)-yt*(at*=ct))*bt,D+=W=(gt*at-mt*st)*bt,o[K]=V+u,o[J]=D+u,B*B+W*W<=c)break;if(et>0&&Math.abs(B+j)<.01&&Math.abs(W+q)<.01){o[K]-=.5*B,o[J]-=.5*W;break}j=B,q=W}}else 0==Z&&(f[tt]=0);v.cache.put_buffer(M),v.cache.put_buffer(k),v.cache.put_buffer(C)}}}();t.optical_flow_lk=e}(v),function(t){var e=function(){var t=function(t,e){var n=.25*t.width+.5|0;return e.x<=t.x+n&&e.x>=t.x-n&&e.y<=t.y+n&&e.y>=t.y-n&&e.width<=1.5*t.width+.5|0&&1.5*e.width+.5|0>=t.width};return{edges_density:.07,detect_single_scale:function(t,e,n,r,o,i,a,s){var f,c,l,u,h,d,p,v,_,m,g,y,b,x,w,M,k,C,S,O,E,A,R,F,z,L=s.size[0]*a|0,U=s.size[1]*a|0,I=.5*a+1.5|0,P=I,N=o-L|0,T=i-U|0,V=o+1|0,D=1/(L*U),j=!0,q=0,B=L,W=U*V,$=W+L,G=L*U*255*this.edges_density|0,H=[];for(h=0;h<T;h+=P)for(q=h*V,u=0;u<N;u+=I,q+=I)if(d=t[q]-t[q+B]-t[q+W]+t[q+$],r&&(r[q]-r[q+B]-r[q+W]+r[q+$]<G||d<20))u+=I,q+=I;else{for(d*=D,v=(p=(e[q]-e[q+B]-e[q+W]+e[q+$])*D-d*d)>0?Math.sqrt(p):1,b=(_=s.complexClassifiers).length,j=!0,f=0;f<b;++f){for(M=(m=_[f]).threshold,x=(g=m.simpleClassifiers).length,k=0,c=0;c<x;++c){if(C=0,w=(O=(y=g[c]).features).length,1===y.tilted)for(l=0;l<w;++l)E=~~(u+(S=O[l])[0]*a)+~~(h+S[1]*a)*V,A=(F=~~(S[2]*a))*V,R=(z=~~(S[3]*a))*V,C+=(n[E]-n[E+F+A]-n[E-z+R]+n[E+F-z+A+R])*S[4];else for(l=0;l<w;++l)E=~~(u+(S=O[l])[0]*a)+~~(h+S[1]*a)*V,F=~~(S[2]*a),R=(z=~~(S[3]*a))*V,C+=(t[E]-t[E+F]-t[E+R]+t[E+R+F])*S[4];k+=C*D<y.threshold*v?y.left_val:y.right_val}if(k<M){j=!1;break}}j&&(H.push({x:u,y:h,width:L,height:U,neighbor:1,confidence:k}),u+=I,q+=I)}return H},detect_multi_scale:function(t,e,n,r,o,i,a,s,f){void 0===s&&(s=1.2),void 0===f&&(f=1);for(var c=a.size[0],l=a.size[1],u=[];f*c<o&&f*l<i;)u=u.concat(this.detect_single_scale(t,e,n,r,o,i,f,a)),f*=s;return u},group_rectangles:function(e,n){void 0===n&&(n=1);var r,o,i=e.length,a=[];for(r=0;r<i;++r)a[r]={parent:-1,element:e[r],rank:0};for(r=0;r<i;++r)if(a[r].element){for(var s=r;-1!=a[s].parent;)s=a[s].parent;for(o=0;o<i;++o)if(r!=o&&a[o].element&&t(a[r].element,a[o].element)){for(var f=o;-1!=a[f].parent;)f=a[f].parent;if(f!=s){a[s].rank>a[f].rank?a[f].parent=s:(a[s].parent=f,a[s].rank==a[f].rank&&a[f].rank++,s=f);for(var c,l=o;-1!=a[l].parent;)c=l,l=a[l].parent,a[c].parent=s;for(l=r;-1!=a[l].parent;)c=l,l=a[l].parent,a[c].parent=s}}}var u=[],h=0;for(r=0;r<i;r++){o=-1;var d=r;if(a[d].element){for(;-1!=a[d].parent;)d=a[d].parent;a[d].rank>=0&&(a[d].rank=~h++),o=~a[d].rank}u[r]=o}var p=[];for(r=0;r<h+1;++r)p[r]={neighbors:0,x:0,y:0,width:0,height:0,confidence:0};for(r=0;r<i;++r){var v=e[r],_=u[r];0==p[_].neighbors&&(p[_].confidence=v.confidence),++p[_].neighbors,p[_].x+=v.x,p[_].y+=v.y,p[_].width+=v.width,p[_].height+=v.height,p[_].confidence=Math.max(p[_].confidence,v.confidence)}var m=[];for(r=0;r<h;++r)(i=p[r].neighbors)>=n&&m.push({x:(2*p[r].x+i)/(2*i),y:(2*p[r].y+i)/(2*i),width:(2*p[r].width+i)/(2*i),height:(2*p[r].height+i)/(2*i),neighbors:p[r].neighbors,confidence:p[r].confidence});var g=[];for(i=m.length,r=0;r<i;++r){v=m[r];var y=!0;for(o=0;o<i;++o){var b=m[o],x=.25*b.width+.5|0;if(r!=o&&v.x>=b.x-x&&v.y>=b.y-x&&v.x+v.width<=b.x+b.width+x&&v.y+v.height<=b.y+b.height+x&&(b.neighbors>Math.max(3,v.neighbors)||v.neighbors<3)){y=!1;break}}y&&g.push(v)}return g}}}();t.haar=e}(v),function(t){var e=function(){var t=function(t,e){var n=.25*t.width+.5|0;return e.x<=t.x+n&&e.x>=t.x-n&&e.y<=t.y+n&&e.y>=t.y-n&&e.width<=1.5*t.width+.5|0&&1.5*e.width+.5|0>=t.width},e=new v.pyramid_t(1);return{interval:4,scale:1.1486,next:5,scale_to:1,prepare_cascade:function(t){for(var e=t.stage_classifier.length,n=0;n<e;n++)for(var r=t.stage_classifier[n].feature,o=t.stage_classifier[n].count,i=t.stage_classifier[n]._feature=new Array(o),a=0;a<o;a++)i[a]={size:r[a].size,px:new Array(r[a].size),pz:new Array(r[a].size),nx:new Array(r[a].size),nz:new Array(r[a].size)}},build_pyramid:function(t,n,r,o){void 0===o&&(o=4);var i=t.cols,a=t.rows,s=0,f=0,c=0,l=!1,u=t,h=t,d=v.U8_t|v.C1_t;this.interval=o,this.scale=Math.pow(2,1/(this.interval+1)),this.next=this.interval+1|0,this.scale_to=Math.log(Math.min(i/n,a/r))/Math.log(this.scale)|0;var p=4*(this.scale_to+2*this.next)|0;for(e.levels!=p&&(e.levels=p,e.data=new Array(p),l=!0,e.data[0]=t),s=1;s<=this.interval;++s)f=i/Math.pow(this.scale,s)|0,c=a/Math.pow(this.scale,s)|0,u=e.data[s<<2],(l||f!=u.cols||c!=u.rows)&&(e.data[s<<2]=new v.matrix_t(f,c,d),u=e.data[s<<2]),v.imgproc.resample(t,u,f,c);for(s=this.next;s<this.scale_to+2*this.next;++s)h=e.data[(s<<2)-(this.next<<2)],u=e.data[s<<2],f=h.cols>>1,c=h.rows>>1,(l||f!=u.cols||c!=u.rows)&&(e.data[s<<2]=new v.matrix_t(f,c,d),u=e.data[s<<2]),v.imgproc.pyrdown(h,u);for(s=2*this.next;s<this.scale_to+2*this.next;++s)f=(h=e.data[(s<<2)-(this.next<<2)]).cols>>1,c=h.rows>>1,u=e.data[1+(s<<2)],(l||f!=u.cols||c!=u.rows)&&(e.data[1+(s<<2)]=new v.matrix_t(f,c,d),u=e.data[1+(s<<2)]),v.imgproc.pyrdown(h,u,1,0),u=e.data[2+(s<<2)],(l||f!=u.cols||c!=u.rows)&&(e.data[2+(s<<2)]=new v.matrix_t(f,c,d),u=e.data[2+(s<<2)]),v.imgproc.pyrdown(h,u,0,1),u=e.data[3+(s<<2)],(l||f!=u.cols||c!=u.rows)&&(e.data[3+(s<<2)]=new v.matrix_t(f,c,d),u=e.data[3+(s<<2)]),v.imgproc.pyrdown(h,u,1,1);return e},detect:function(t,e){this.interval;var n,r,o,i,a,s=this.scale,f=this.next,c=this.scale_to,l=0,u=0,h=0,d=0,p=0,v=0,_=0,m=0,g=0,y=0,b=0,x=0,w=0,M=0,k=0,C=0,S=0,O=0,E=!0,A=!0,R=1,F=1,z=[0,1,0,1],L=[0,0,1,1],U=[],I=t.data,P=[],N=[0,0,0],T=[0,0,0],V=[0,0,0];for(l=0;l<c;l++){for(C=I[(k=l<<2)+(f<<3)].cols-(e.width>>2),S=I[k+(f<<3)].rows-(e.height>>2),T[0]=1*I[k].cols,T[1]=1*I[k+(f<<2)].cols,T[2]=1*I[k+(f<<3)].cols,V[0]=4*I[k].cols-4*C,V[1]=2*I[k+(f<<2)].cols-2*C,V[2]=1*I[k+(f<<3)].cols-1*C,m=e.stage_classifier.length,u=0;u<m;u++)for(o=e.stage_classifier[u].feature,r=e.stage_classifier[u]._feature,g=e.stage_classifier[u].count,h=0;h<g;h++)for(i=r[h],y=0|(a=o[h]).size,_=0;_<y;_++)i.px[_]=1*a.px[_]+a.py[_]*T[a.pz[_]],i.pz[_]=a.pz[_],i.nx[_]=1*a.nx[_]+a.ny[_]*T[a.nz[_]],i.nz[_]=a.nz[_];for(P[0]=I[k].data,P[1]=I[k+(f<<2)].data,_=0;_<4;_++)for(P[2]=I[k+(f<<3)+_].data,N[0]=2*z[_]+L[_]*(2*I[k].cols),N[1]=1*z[_]+L[_]*(1*I[k+(f<<2)].cols),N[2]=0,v=0;v<S;v++){for(p=0;p<C;p++){for(O=0,E=!0,m=e.stage_classifier.length,u=0;u<m;u++){for(O=0,n=e.stage_classifier[u].alpha,r=e.stage_classifier[u]._feature,g=e.stage_classifier[u].count,h=0;h<g;h++)if((x=P[(i=r[h]).pz[0]][N[i.pz[0]]+i.px[0]])<=(w=P[i.nz[0]][N[i.nz[0]]+i.nx[0]]))O+=n[h<<1];else{for(A=!0,y=i.size,M=1;M<y;M++){if(i.pz[M]>=0&&(b=P[i.pz[M]][N[i.pz[M]]+i.px[M]])<x){if(b<=w){A=!1;break}x=b}if(i.nz[M]>=0&&(d=P[i.nz[M]][N[i.nz[M]]+i.nx[M]])>w){if(x<=d){A=!1;break}w=d}}O+=A?n[1+(h<<1)]:n[h<<1]}if(O<e.stage_classifier[u].threshold){E=!1;break}}E&&(U.push({x:(4*p+2*z[_])*R,y:(4*v+2*L[_])*F,width:e.width*R,height:e.height*F,neighbor:1,confidence:O}),++p,N[0]+=4,N[1]+=2,N[2]+=1),N[0]+=4,N[1]+=2,N[2]+=1}N[0]+=V[0],N[1]+=V[1],N[2]+=V[2]}R*=s,F*=s}return U},group_rectangles:function(e,n){void 0===n&&(n=1);var r,o,i=e.length,a=[];for(r=0;r<i;++r)a[r]={parent:-1,element:e[r],rank:0};for(r=0;r<i;++r)if(a[r].element){for(var s=r;-1!=a[s].parent;)s=a[s].parent;for(o=0;o<i;++o)if(r!=o&&a[o].element&&t(a[r].element,a[o].element)){for(var f=o;-1!=a[f].parent;)f=a[f].parent;if(f!=s){a[s].rank>a[f].rank?a[f].parent=s:(a[s].parent=f,a[s].rank==a[f].rank&&a[f].rank++,s=f);for(var c,l=o;-1!=a[l].parent;)c=l,l=a[l].parent,a[c].parent=s;for(l=r;-1!=a[l].parent;)c=l,l=a[l].parent,a[c].parent=s}}}var u=[],h=0;for(r=0;r<i;r++){o=-1;var d=r;if(a[d].element){for(;-1!=a[d].parent;)d=a[d].parent;a[d].rank>=0&&(a[d].rank=~h++),o=~a[d].rank}u[r]=o}var p=[];for(r=0;r<h+1;++r)p[r]={neighbors:0,x:0,y:0,width:0,height:0,confidence:0};for(r=0;r<i;++r){var v=e[r],_=u[r];0==p[_].neighbors&&(p[_].confidence=v.confidence),++p[_].neighbors,p[_].x+=v.x,p[_].y+=v.y,p[_].width+=v.width,p[_].height+=v.height,p[_].confidence=Math.max(p[_].confidence,v.confidence)}var m=[];for(r=0;r<h;++r)(i=p[r].neighbors)>=n&&m.push({x:(2*p[r].x+i)/(2*i),y:(2*p[r].y+i)/(2*i),width:(2*p[r].width+i)/(2*i),height:(2*p[r].height+i)/(2*i),neighbors:p[r].neighbors,confidence:p[r].confidence});var g=[];for(i=m.length,r=0;r<i;++r){v=m[r];var y=!0;for(o=0;o<i;++o){var b=m[o],x=.25*b.width+.5|0;if(r!=o&&v.x>=b.x-x&&v.y>=b.y-x&&v.x+v.width<=b.x+b.width+x&&v.y+v.height<=b.y+b.height+x&&(b.neighbors>Math.max(3,v.neighbors)||v.neighbors<3)){y=!1;break}}y&&g.push(v)}return g}}}();t.bbf=e}(v),function(e){t.exports=e}(v)})),t((function(t,n){t.exports=function t(n,r,o){function i(s,f){if(!r[s]){if(!n[s]){if(!f&&e)return e();if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};n[s][0].call(l.exports,(function(t){var e=n[s][1][t];return i(e||t)}),l,l.exports,t,n,r,o)}return r[s].exports}for(var a=e,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,f,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(a(n=this._events[t]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,f=0;f<r;f++)c[f].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!o(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,r=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){var r,o,i,a,s;s=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),i="ie"===(r=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(o={name:"version"===r[1]?r[3]:r[1],version:i||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.platform[o.platform.name]=!0,e.exports=o},{}],3:[function(t,e,n){var r,o,i,a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},f=[].slice;r=t("events").EventEmitter,i=t("./browser.coffee"),o=function(t){var e,n;function r(t){var n,r,o;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)o=e[r],null==(n=this.options)[r]&&(n[r]=o)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},n={delay:500,copy:!1},r.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},r.prototype.setOptions=function(t){var e,n,r;for(e in n=[],t)a.call(t,e)&&(r=t[e],n.push(this.setOption(e,r)));return n},r.prototype.addFrame=function(t,e){var r,o;for(o in null==e&&(e={}),(r={}).transparent=this.options.transparent,n)r[o]=e[o]||n[o];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)r.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?r.data=this.getContextData(t):r.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?r.data=this.getImageData(t):r.image=t}return this.frames.push(r)},r.prototype.render=function(){var t,e,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,n;for(n=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)n.push(null);return n}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,n=e;0<=n?t<n:t>n;0<=n?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},r.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},r.prototype.spawnWorkers=function(){var t,e,n,r;return t=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=e=this.freeWorkers.length;e<=t?r<t:r>t;e<=t?r++:r--)n.push(r);return n}.apply(this).forEach((r=this,function(t){var e;return r.log("spawning worker "+t),(e=new Worker(r.options.workerScript)).onmessage=function(t){return r.activeWorkers.splice(r.activeWorkers.indexOf(e),1),r.freeWorkers.push(e),r.frameFinished(t.data)},r.freeWorkers.push(e)})),t},r.prototype.frameFinished=function(t){var e,n;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,n=this.freeWorkers.length;1<=n?e<n:e>n;1<=n?++e:--e)this.renderNextFrame();return s.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},r.prototype.finishRendering=function(){var t,e,n,r,o,i,a,s,f,c,l,u,h,d,p,v;for(s=0,o=0,f=(d=this.imageParts).length;o<f;o++)s+=((e=d[o]).data.length-1)*e.pageSize+e.cursor;for(s+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(s/1e3)+"kb"),t=new Uint8Array(s),u=0,i=0,c=(p=this.imageParts).length;i<c;i++)for(n=a=0,l=(v=(e=p[i]).data).length;a<l;n=++a)h=v[n],t.set(h,u),n===e.data.length-1?u+=e.cursor:u+=e.pageSize;return r=new Blob([t],{type:"image/gif"}),this.emit("finished",r,t)},r.prototype.renderNextFrame=function(){var t,e,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(e)},r.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},r.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},r.prototype.getTask=function(t){var e,n;if(n={index:e=this.frames.indexOf(t),last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===i.name},null!=t.data)n.data=t.data;else if(null!=t.context)n.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");n.data=this.getImageData(t.image)}return n},r.prototype.log=function(){var t;if(t=1<=arguments.length?f.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},r}(r),e.exports=o},{"./browser.coffee":2,events:1}]},{},[3])(3)}));function n(t,e){const n=Object.create(null),r=t.split(",");for(let t=0;t<r.length;t++)n[r[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const r=n("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),o=n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function i(t){if(k(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=i(A(r)?f(r):r);if(o)for(const t in o)e[t]=o[t]}return e}if(F(t))return t}const a=/;(?![^(]*\))/g,s=/:(.+)/;function f(t){const e={};return t.split(a).forEach(t=>{if(t){const n=t.split(s);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function c(t){let e="";if(A(t))e=t;else if(k(t))for(let n=0;n<t.length;n++)e+=c(t[n])+" ";else if(F(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function l(t,e){if(t===e)return!0;let n=O(t),r=O(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=k(t),r=k(e),n||r)return!(!n||!r)&&function(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=l(t[r],e[r]);return n}(t,e);if(n=F(t),r=F(e),n||r){if(!n||!r)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t){const r=t.hasOwnProperty(n),o=e.hasOwnProperty(n);if(r&&!o||!r&&o||!l(t[n],e[n]))return!1}}return String(t)===String(e)}const u=t=>null==t?"":F(t)?JSON.stringify(t,h,2):String(t),h=(t,e)=>C(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,n])=>(t[e+" =>"]=n,t),{})}:S(e)?{[`Set(${e.size})`]:[...e.values()]}:!F(e)||k(e)||I(e)?e:String(e),d={},p=[],v=()=>{},_=()=>!1,m=/^on[^a-z]/,g=t=>m.test(t),y=t=>t.startsWith("onUpdate:"),b=Object.assign,x=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},w=Object.prototype.hasOwnProperty,M=(t,e)=>w.call(t,e),k=Array.isArray,C=t=>"[object Map]"===U(t),S=t=>"[object Set]"===U(t),O=t=>t instanceof Date,E=t=>"function"==typeof t,A=t=>"string"==typeof t,R=t=>"symbol"==typeof t,F=t=>null!==t&&"object"==typeof t,z=t=>F(t)&&E(t.then)&&E(t.catch),L=Object.prototype.toString,U=t=>L.call(t),I=t=>"[object Object]"===U(t),P=t=>A(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,N=n(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},V=/-(\w)/g,D=T(t=>t.replace(V,(t,e)=>e?e.toUpperCase():"")),j=/\B([A-Z])/g,q=T(t=>t.replace(j,"-$1").toLowerCase()),B=T(t=>t.charAt(0).toUpperCase()+t.slice(1)),W=T(t=>t?"on"+B(t):""),$=(t,e)=>t!==e&&(t==t||e==e),G=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},H=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Y=t=>{const e=parseFloat(t);return isNaN(e)?t:e},K=new WeakMap,J=[];let Q;const X=Symbol(""),Z=Symbol("");function tt(t,e=d){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!J.includes(n)){rt(n);try{return it.push(ot),ot=!0,J.push(n),Q=n,t()}finally{J.pop(),st(),Q=J[J.length-1]}}};return n.id=nt++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function et(t){t.active&&(rt(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let nt=0;function rt(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ot=!0;const it=[];function at(){it.push(ot),ot=!1}function st(){const t=it.pop();ot=void 0===t||t}function ft(t,e,n){if(!ot||void 0===Q)return;let r=K.get(t);r||K.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=new Set),o.has(Q)||(o.add(Q),Q.deps.push(o))}function ct(t,e,n,r,o,i){const a=K.get(t);if(!a)return;const s=new Set,f=t=>{t&&t.forEach(t=>{(t!==Q||t.allowRecurse)&&s.add(t)})};if("clear"===e)a.forEach(f);else if("length"===n&&k(t))a.forEach((t,e)=>{("length"===e||e>=r)&&f(t)});else switch(void 0!==n&&f(a.get(n)),e){case"add":k(t)?P(n)&&f(a.get("length")):(f(a.get(X)),C(t)&&f(a.get(Z)));break;case"delete":k(t)||(f(a.get(X)),C(t)&&f(a.get(Z)));break;case"set":C(t)&&f(a.get(X))}s.forEach(t=>{t.options.scheduler?t.options.scheduler(t):t()})}const lt=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(R)),ut=_t(),ht=_t(!1,!0),dt=_t(!0),pt=_t(!0,!0),vt={};function _t(t=!1,e=!1){return function(n,r,o){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&o===(t?Bt:qt).get(n))return n;const i=k(n);if(i&&M(vt,r))return Reflect.get(vt,r,o);const a=Reflect.get(n,r,o);if(R(r)?lt.has(r):"__proto__"===r||"__v_isRef"===r)return a;if(t||ft(n,0,r),e)return a;if(Xt(a)){return!i||!P(r)?a.value:a}return F(a)?t?Gt(a):$t(a):a}}["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];vt[t]=function(...t){const n=Qt(this);for(let t=0,e=this.length;t<e;t++)ft(n,0,t+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(Qt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];vt[t]=function(...t){at();const n=e.apply(this,t);return st(),n}});function mt(t=!1){return function(e,n,r,o){const i=e[n];if(!t&&(r=Qt(r),!k(e)&&Xt(i)&&!Xt(r)))return i.value=r,!0;const a=k(e)&&P(n)?Number(n)<e.length:M(e,n),s=Reflect.set(e,n,r,o);return e===Qt(o)&&(a?$(r,i)&&ct(e,"set",n,r):ct(e,"add",n,r)),s}}const gt={get:ut,set:mt(),deleteProperty:function(t,e){const n=M(t,e),r=(t[e],Reflect.deleteProperty(t,e));return r&&n&&ct(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return R(e)&&lt.has(e)||ft(t,0,e),n},ownKeys:function(t){return ft(t,0,k(t)?"length":X),Reflect.ownKeys(t)}},yt={get:dt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},bt=b({},gt,{get:ht,set:mt(!0)}),xt=(b({},yt,{get:pt}),t=>F(t)?$t(t):t),wt=t=>F(t)?Gt(t):t,Mt=t=>t,kt=t=>Reflect.getPrototypeOf(t);function Ct(t,e,n=!1,r=!1){const o=Qt(t=t.__v_raw),i=Qt(e);e!==i&&!n&&ft(o,0,e),!n&&ft(o,0,i);const{has:a}=kt(o),s=n?wt:r?Mt:xt;return a.call(o,e)?s(t.get(e)):a.call(o,i)?s(t.get(i)):void 0}function St(t,e=!1){const n=this.__v_raw,r=Qt(n),o=Qt(t);return t!==o&&!e&&ft(r,0,t),!e&&ft(r,0,o),t===o?n.has(t):n.has(t)||n.has(o)}function Ot(t,e=!1){return t=t.__v_raw,!e&&ft(Qt(t),0,X),Reflect.get(t,"size",t)}function Et(t){t=Qt(t);const e=Qt(this),n=kt(e).has.call(e,t),r=e.add(t);return n||ct(e,"add",t,t),r}function At(t,e){e=Qt(e);const n=Qt(this),{has:r,get:o}=kt(n);let i=r.call(n,t);i||(t=Qt(t),i=r.call(n,t));const a=o.call(n,t),s=n.set(t,e);return i?$(e,a)&&ct(n,"set",t,e):ct(n,"add",t,e),s}function Rt(t){const e=Qt(this),{has:n,get:r}=kt(e);let o=n.call(e,t);o||(t=Qt(t),o=n.call(e,t));r&&r.call(e,t);const i=e.delete(t);return o&&ct(e,"delete",t,void 0),i}function Ft(){const t=Qt(this),e=0!==t.size,n=t.clear();return e&&ct(t,"clear",void 0,void 0),n}function zt(t,e){return function(n,r){const o=this,i=o.__v_raw,a=Qt(i),s=t?wt:e?Mt:xt;return!t&&ft(a,0,X),i.forEach((t,e)=>n.call(r,s(t),s(e),o))}}function Lt(t,e,n){return function(...r){const o=this.__v_raw,i=Qt(o),a=C(i),s="entries"===t||t===Symbol.iterator&&a,f="keys"===t&&a,c=o[t](...r),l=e?wt:n?Mt:xt;return!e&&ft(i,0,f?Z:X),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:s?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Ut(t){return function(...e){return"delete"!==t&&this}}const It={get(t){return Ct(this,t)},get size(){return Ot(this)},has:St,add:Et,set:At,delete:Rt,clear:Ft,forEach:zt(!1,!1)},Pt={get(t){return Ct(this,t,!1,!0)},get size(){return Ot(this)},has:St,add:Et,set:At,delete:Rt,clear:Ft,forEach:zt(!1,!0)},Nt={get(t){return Ct(this,t,!0)},get size(){return Ot(this,!0)},has(t){return St.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:zt(!0,!1)};function Tt(t,e){const n=e?Pt:t?Nt:It;return(e,r,o)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(M(n,r)&&r in e?n:e,r,o)}["keys","values","entries",Symbol.iterator].forEach(t=>{It[t]=Lt(t,!1,!1),Nt[t]=Lt(t,!0,!1),Pt[t]=Lt(t,!1,!0)});const Vt={get:Tt(!1,!1)},Dt={get:Tt(!1,!0)},jt={get:Tt(!0,!1)},qt=new WeakMap,Bt=new WeakMap;function Wt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>U(t).slice(8,-1))(t))}function $t(t){return t&&t.__v_isReadonly?t:Ht(t,!1,gt,Vt)}function Gt(t){return Ht(t,!0,yt,jt)}function Ht(t,e,n,r){if(!F(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=e?Bt:qt,i=o.get(t);if(i)return i;const a=Wt(t);if(0===a)return t;const s=new Proxy(t,2===a?r:n);return o.set(t,s),s}function Yt(t){return Kt(t)?Yt(t.__v_raw):!(!t||!t.__v_isReactive)}function Kt(t){return!(!t||!t.__v_isReadonly)}function Jt(t){return Yt(t)||Kt(t)}function Qt(t){return t&&Qt(t.__v_raw)||t}function Xt(t){return Boolean(t&&!0===t.__v_isRef)}const Zt={get:(t,e,n)=>{return Xt(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const o=t[e];return Xt(o)&&!Xt(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};class te{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=tt(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ct(Qt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),ft(Qt(this),0,"value"),this._value}set value(t){this._setter(t)}}function ee(t,e,n,r){let o;try{o=r?t(...r):t()}catch(t){re(t,e,n)}return o}function ne(t,e,n,r){if(E(t)){const o=ee(t,e,n,r);return o&&z(o)&&o.catch(t=>{re(t,e,n)}),o}const o=[];for(let i=0;i<t.length;i++)o.push(ne(t[i],e,n,r));return o}function re(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const o=e.proxy,i=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,o,i))return;r=r.parent}const a=e.appContext.config.errorHandler;if(a)return void ee(a,null,10,[t,o,i])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let oe=!1,ie=!1;const ae=[];let se=0;const fe=[];let ce=null,le=0;const ue=[];let he=null,de=0;const pe=Promise.resolve();let ve=null,_e=null;function me(t){const e=ve||pe;return t?e.then(this?t.bind(this):t):e}function ge(t){ae.length&&ae.includes(t,oe&&t.allowRecurse?se+1:se)||t===_e||(ae.push(t),ye())}function ye(){oe||ie||(ie=!0,ve=pe.then(ke))}function be(t,e,n,r){k(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),ye()}function xe(t,e=null){if(fe.length){for(_e=e,ce=[...new Set(fe)],fe.length=0,le=0;le<ce.length;le++)ce[le]();ce=null,le=0,_e=null,xe(t,e)}}function we(t){if(ue.length){const t=[...new Set(ue)];if(ue.length=0,he)return void he.push(...t);for(he=t,he.sort((t,e)=>Me(t)-Me(e)),de=0;de<he.length;de++)he[de]();he=null,de=0}}const Me=t=>null==t.id?1/0:t.id;function ke(t){ie=!1,oe=!0,xe(t),ae.sort((t,e)=>Me(t)-Me(e));try{for(se=0;se<ae.length;se++){const t=ae[se];t&&ee(t,null,14)}}finally{se=0,ae.length=0,we(),oe=!1,ve=null,(ae.length||ue.length)&&ke(t)}}function Ce(t,e,...n){const r=t.vnode.props||d;let o=n;const i=e.startsWith("update:"),a=i&&e.slice(7);if(a&&a in r){const t=("modelValue"===a?"model":a)+"Modifiers",{number:e,trim:i}=r[t]||d;i?o=n.map(t=>t.trim()):e&&(o=n.map(Y))}let s=W(D(e)),f=r[s];!f&&i&&(s=W(q(e)),f=r[s]),f&&ne(f,t,6,o);const c=r[s+"Once"];if(c){if(t.emitted){if(t.emitted[s])return}else(t.emitted={})[s]=!0;ne(c,t,6,o)}}function Se(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const r=t.emits;let o={},i=!1;if(!E(t)){const r=t=>{i=!0,b(o,Se(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return r||i?(k(r)?r.forEach(t=>o[t]=null):b(o,r),t.__emits=o):t.__emits=null}function Oe(t,e){return!(!t||!g(e))&&(e=e.replace(/Once$/,""),M(t,e[2].toLowerCase()+e.slice(3))||M(t,e.slice(2)))}let Ee=null;function Ae(t){Ee=t}function Re(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:i,propsOptions:[a],slots:s,attrs:f,emit:c,render:l,renderCache:u,data:h,setupState:d,ctx:p}=t;let v;Ee=t;try{let t;if(4&n.shapeFlag){const e=o||r;v=Yn(l.call(e,e,u,i,d,h,p)),t=f}else{const n=e;0,v=Yn(n.length>1?n(i,{attrs:f,slots:s,emit:c}):n(i,null)),t=e.props?f:ze(f)}let _=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=_;e.length&&(1&n||6&n)&&(a&&e.some(y)&&(t=Le(t,a)),_=$n(_,t))}n.dirs&&(_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_}catch(e){re(e,t,1),v=Wn(zn)}return Ee=null,v}function Fe(t){const e=t.filter(t=>!(Vn(t)&&t.type===zn&&"v-if"!==t.children));return 1===e.length&&Vn(e[0])?e[0]:null}const ze=t=>{let e;for(const n in t)("class"===n||"style"===n||g(n))&&((e||(e={}))[n]=t[n]);return e},Le=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Ue(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(e[i]!==t[i]&&!Oe(n,i))return!0}return!1}function Ie(t){if(E(t)&&(t=t()),k(t)){t=Fe(t)}return Yn(t)}let Pe=0;const Ne=t=>Pe+=t;function Te(t,e,n,r=!1){const o={},i={};H(i,jn,1),Ve(t,e,o,i),n?t.props=r?o:Ht(o,!1,bt,Dt):t.type.props?t.props=o:t.props=i,t.attrs=i}function Ve(t,e,n,r){const[o,i]=t.propsOptions;if(e)for(const i in e){const a=e[i];if(N(i))continue;let s;o&&M(o,s=D(i))?n[s]=a:Oe(t.emitsOptions,i)||(r[i]=a)}if(i){const e=Qt(n);for(let r=0;r<i.length;r++){const a=i[r];n[a]=De(o,e,a,e[a],t)}}}function De(t,e,n,r,o){const i=t[n];if(null!=i){const t=M(i,"default");if(t&&void 0===r){const t=i.default;i.type!==Function&&E(t)?(dr(o),r=t(e),dr(null)):r=t}i[0]&&(M(e,n)||t?!i[1]||""!==r&&r!==q(n)||(r=!0):r=!1)}return r}function je(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const r=t.props,o={},i=[];let a=!1;if(!E(t)){const r=t=>{a=!0;const[n,r]=je(t,e,!0);b(o,n),r&&i.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!r&&!a)return t.__props=p;if(k(r))for(let t=0;t<r.length;t++){const e=D(r[t]);qe(e)&&(o[e]=d)}else if(r)for(const t in r){const e=D(t);if(qe(e)){const n=r[t],a=o[e]=k(n)||E(n)?{type:n}:n;if(a){const t=$e(Boolean,a.type),n=$e(String,a.type);a[0]=t>-1,a[1]=n<0||t<n,(t>-1||M(a,"default"))&&i.push(e)}}}return t.__props=[o,i]}function qe(t){return"$"!==t[0]}function Be(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function We(t,e){return Be(t)===Be(e)}function $e(t,e){if(k(e)){for(let n=0,r=e.length;n<r;n++)if(We(e[n],t))return n}else if(E(e))return We(e,t)?0:-1;return-1}function Ge(t,e,n=hr,r=!1){if(n){const o=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;at(),dr(n);const o=ne(e,n,t,r);return dr(null),st(),o});return r?o.unshift(i):o.push(i),i}}const He=t=>(e,n=hr)=>!pr&&Ge(t,e,n),Ye=He("bm"),Ke=He("m"),Je=He("bu"),Qe=He("u"),Xe=He("bum"),Ze=He("um"),tn=He("rtg"),en=He("rtc"),nn={};function rn(t,e,n){return on(t,e,n)}function on(t,e,{immediate:n,deep:r,flush:o,onTrack:i,onTrigger:a}=d,s=hr){let f,c,l=!1;if(Xt(t)?(f=()=>t.value,l=!!t._shallow):Yt(t)?(f=()=>t,r=!0):f=k(t)?()=>t.map(t=>Xt(t)?t.value:Yt(t)?sn(t):E(t)?ee(t,s,2):void 0):E(t)?e?()=>ee(t,s,2):()=>{if(!s||!s.isUnmounted)return c&&c(),ee(t,s,3,[u])}:v,e&&r){const t=f;f=()=>sn(t())}const u=t=>{c=m.options.onStop=()=>{ee(t,s,4)}};let h=k(t)?[]:nn;const p=()=>{if(m.active)if(e){const t=m();(r||l||$(t,h))&&(c&&c(),ne(e,s,3,[t,h===nn?void 0:h,u]),h=t)}else m()};let _;p.allowRecurse=!!e,_="sync"===o?p:"post"===o?()=>wn(p,s&&s.suspense):()=>{!s||s.isMounted?function(t){be(t,ce,fe,le)}(p):p()};const m=tt(f,{lazy:!0,onTrack:i,onTrigger:a,scheduler:_});return mr(m),e?n?p():h=m():"post"===o?wn(m,s&&s.suspense):m(),()=>{et(m),s&&x(s.effects,m)}}function an(t,e,n){const r=this.proxy;return on(A(t)?()=>r[t]:t.bind(r),e.bind(r),n,this)}function sn(t,e=new Set){if(!F(t)||e.has(t))return t;if(e.add(t),Xt(t))sn(t.value,e);else if(k(t))for(let n=0;n<t.length;n++)sn(t[n],e);else if(S(t)||C(t))t.forEach(t=>{sn(t,e)});else for(const n in t)sn(t[n],e);return t}const fn=t=>t.type.__isKeepAlive;function cn(t,e,n=hr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(Ge(e,r,n),n){let t=n.parent;for(;t&&t.parent;)fn(t.parent.vnode)&&ln(r,e,n,t),t=t.parent}}function ln(t,e,n,r){const o=Ge(e,t,r,!0);Ze(()=>{x(r[e],o)},n)}const un=t=>"_"===t[0]||"$stable"===t,hn=t=>k(t)?t.map(Yn):[Yn(t)],dn=(t,e,n)=>function(t,e=Ee){if(!e)return t;const n=(...n)=>{Pe||Pn(!0);const r=Ee;Ae(e);const o=t(...n);return Ae(r),Pe||Nn(),o};return n._c=!0,n}(t=>hn(e(t)),n),pn=(t,e)=>{const n=t._ctx;for(const r in t){if(un(r))continue;const o=t[r];if(E(o))e[r]=dn(0,o,n);else if(null!=o){const t=hn(o);e[r]=()=>t}}},vn=(t,e)=>{const n=hn(e);t.slots.default=()=>n};function _n(t,e){if(null===Ee)return t;const n=Ee.proxy,r=t.dirs||(t.dirs=[]);for(let t=0;t<e.length;t++){let[o,i,a,s=d]=e[t];E(o)&&(o={mounted:o,updated:o}),r.push({dir:o,instance:n,value:i,oldValue:void 0,arg:a,modifiers:s})}return t}function mn(t,e,n,r){const o=t.dirs,i=e&&e.dirs;for(let a=0;a<o.length;a++){const s=o[a];i&&(s.oldValue=i[a].value);const f=s.dir[r];f&&ne(f,n,8,[t.el,s,t,e])}}function gn(){return{app:null,config:{isNativeTag:_,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:_,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let yn=0;function bn(t,e){return function(n,r=null){null==r||F(r)||(r=null);const o=gn(),i=new Set;let a=!1;const s=o.app={_uid:yn++,_component:n,_props:r,_container:null,_context:o,version:yr,get config(){return o.config},set config(t){},use:(t,...e)=>(i.has(t)||(t&&E(t.install)?(i.add(t),t.install(s,...e)):E(t)&&(i.add(t),t(s,...e))),s),mixin:t=>(o.mixins.includes(t)||(o.mixins.push(t),(t.props||t.emits)&&(o.deopt=!0)),s),component:(t,e)=>e?(o.components[t]=e,s):o.components[t],directive:(t,e)=>e?(o.directives[t]=e,s):o.directives[t],mount(i,f){if(!a){const c=Wn(n,r);return c.appContext=o,f&&e?e(c,i):t(c,i),a=!0,s._container=i,i.__vue_app__=s,c.component.proxy}},unmount(){a&&t(null,s._container)},provide:(t,e)=>(o.provides[t]=e,s)};return s}}const xn={scheduler:ge,allowRecurse:!0},wn=function(t,e){e&&e.pendingBranch?k(t)?e.effects.push(...t):e.effects.push(t):be(t,he,ue,de)},Mn=(t,e,n,r,o)=>{if(k(t))return void t.forEach((t,i)=>Mn(t,e&&(k(e)?e[i]:e),n,r,o));let i;i=o?4&o.shapeFlag?o.component.proxy:o.el:null;const{i:a,r:s}=t,f=e&&e.r,c=a.refs===d?a.refs={}:a.refs,l=a.setupState;if(null!=f&&f!==s&&(A(f)?(c[f]=null,M(l,f)&&(l[f]=null)):Xt(f)&&(f.value=null)),A(s)){const t=()=>{c[s]=i,M(l,s)&&(l[s]=i)};i?(t.id=-1,wn(t,r)):t()}else if(Xt(s)){const t=()=>{s.value=i};i?(t.id=-1,wn(t,r)):t()}else E(s)&&ee(s,n,12,[i,c])};function kn(t){return function(t,e){const{insert:n,remove:r,patchProp:o,forcePatchProp:i,createElement:a,createText:s,createComment:f,setText:c,setElementText:l,parentNode:u,nextSibling:h,setScopeId:_=v,cloneNode:m,insertStaticContent:g}=t,y=(t,e,n,r=null,o=null,i=null,a=!1,s=!1)=>{t&&!Dn(t,e)&&(r=nt(t),K(t,o,i,!0),t=null),-2===e.patchFlag&&(s=!1,e.dynamicChildren=null);const{type:f,ref:c,shapeFlag:l}=e;switch(f){case Fn:x(t,e,n,r);break;case zn:w(t,e,n,r);break;case Ln:null==t&&C(e,n,r,a);break;case Rn:U(t,e,n,r,o,i,a,s);break;default:1&l?S(t,e,n,r,o,i,a,s):6&l?I(t,e,n,r,o,i,a,s):(64&l||128&l)&&f.process(t,e,n,r,o,i,a,s,ot)}null!=c&&o&&Mn(c,t&&t.ref,o,i,e)},x=(t,e,r,o)=>{if(null==t)n(e.el=s(e.children),r,o);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},w=(t,e,r,o)=>{null==t?n(e.el=f(e.children||""),r,o):e.el=t.el},C=(t,e,n,r)=>{[t.el,t.anchor]=g(t.children,e,n,r)},S=(t,e,n,r,o,i,a,s)=>{a=a||"svg"===e.type,null==t?O(e,n,r,o,i,a,s):R(t,e,o,i,a,s)},O=(t,e,r,i,s,f,c)=>{let u,h;const{type:d,props:p,shapeFlag:v,transition:_,scopeId:g,patchFlag:y,dirs:b}=t;if(t.el&&void 0!==m&&-1===y)u=t.el=m(t.el);else{if(u=t.el=a(t.type,f,p&&p.is),8&v?l(u,t.children):16&v&&A(t.children,u,null,i,s,f&&"foreignObject"!==d,c||!!t.dynamicChildren),b&&mn(t,null,i,"created"),p){for(const e in p)N(e)||o(u,e,null,p[e],f,t.children,i,s,Z);(h=p.onVnodeBeforeMount)&&Cn(h,i,t)}E(u,g,t,i)}b&&mn(t,null,i,"beforeMount");const x=(!s||s&&!s.pendingBranch)&&_&&!_.persisted;x&&_.beforeEnter(u),n(u,e,r),((h=p&&p.onVnodeMounted)||x||b)&&wn(()=>{h&&Cn(h,i,t),x&&_.enter(u),b&&mn(t,null,i,"mounted")},s)},E=(t,e,n,r)=>{if(e&&_(t,e),r){const o=r.type.__scopeId;o&&o!==e&&_(t,o+"-s"),n===r.subTree&&E(t,r.vnode.scopeId,r.vnode,r.parent)}},A=(t,e,n,r,o,i,a,s=0)=>{for(let f=s;f<t.length;f++){const s=t[f]=a?Kn(t[f]):Yn(t[f]);y(null,s,e,n,r,o,i,a)}},R=(t,e,n,r,a,s)=>{const f=e.el=t.el;let{patchFlag:c,dynamicChildren:u,dirs:h}=e;c|=16&t.patchFlag;const p=t.props||d,v=e.props||d;let _;if((_=v.onVnodeBeforeUpdate)&&Cn(_,n,e,t),h&&mn(e,t,n,"beforeUpdate"),c>0){if(16&c)L(f,e,p,v,n,r,a);else if(2&c&&p.class!==v.class&&o(f,"class",null,v.class,a),4&c&&o(f,"style",p.style,v.style,a),8&c){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const c=s[e],l=p[c],u=v[c];(u!==l||i&&i(f,c))&&o(f,c,l,u,a,t.children,n,r,Z)}}1&c&&t.children!==e.children&&l(f,e.children)}else s||null!=u||L(f,e,p,v,n,r,a);const m=a&&"foreignObject"!==e.type;u?F(t.dynamicChildren,u,f,n,r,m):s||B(t,e,f,null,n,r,m),((_=v.onVnodeUpdated)||h)&&wn(()=>{_&&Cn(_,n,e,t),h&&mn(e,t,n,"updated")},r)},F=(t,e,n,r,o,i)=>{for(let a=0;a<e.length;a++){const s=t[a],f=e[a],c=s.type===Rn||!Dn(s,f)||6&s.shapeFlag||64&s.shapeFlag?u(s.el):n;y(s,f,c,null,r,o,i,!0)}},L=(t,e,n,r,a,s,f)=>{if(n!==r){for(const c in r){if(N(c))continue;const l=r[c],u=n[c];(l!==u||i&&i(t,c))&&o(t,c,u,l,f,e.children,a,s,Z)}if(n!==d)for(const i in n)N(i)||i in r||o(t,i,n[i],null,f,e.children,a,s,Z)}},U=(t,e,r,o,i,a,f,c)=>{const l=e.el=t?t.el:s(""),u=e.anchor=t?t.anchor:s("");let{patchFlag:h,dynamicChildren:d}=e;h>0&&(c=!0),null==t?(n(l,r,o),n(u,r,o),A(e.children,r,u,i,a,f,c)):h>0&&64&h&&d?(F(t.dynamicChildren,d,r,i,a,f),(null!=e.key||i&&e===i.subTree)&&function t(e,n,r=!1){const o=e.children,i=n.children;if(k(o)&&k(i))for(let e=0;e<o.length;e++){const n=o[e];let a=i[e];1&a.shapeFlag&&!a.dynamicChildren&&((a.patchFlag<=0||32===a.patchFlag)&&(a=i[e]=Kn(i[e]),a.el=n.el),r||t(n,a))}}(t,e,!0)):B(t,e,r,u,i,a,f,c)},I=(t,e,n,r,o,i,a,s)=>{null==t?512&e.shapeFlag?o.ctx.activate(e,n,r,a,s):P(e,n,r,o,i,a,s):T(t,e,s)},P=(t,e,n,r,o,i,a)=>{const s=t.component=function(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||lr,i={uid:ur++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,update:null,render:null,proxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:je(r,o),emitsOptions:Se(r,o),emit:null,emitted:null,ctx:d,data:d,props:d,attrs:d,slots:d,refs:d,setupState:d,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Ce.bind(null,i),i}(t,r,o);if(fn(t)&&(s.ctx.renderer=ot),function(t,e=!1){pr=e;const{props:n,children:r,shapeFlag:o}=t.vnode,i=4&o;Te(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,H(e,"_",n)):pn(e,t.slots={})}else t.slots={},e&&vn(t,e);H(t.slots,jn,1)})(t,r);const a=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fr);const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){return{attrs:t.attrs,slots:t.slots,emit:t.emit}}(t):null;hr=t,at();const o=ee(r,t,0,[t.props,n]);if(st(),hr=null,z(o)){if(e)return o.then(e=>{vr(t,e)});t.asyncDep=o}else vr(t,o)}else _r(t)}(t,e):void 0;pr=!1}(s),s.asyncDep){if(o&&o.registerDep(s,V),!t.el){const t=s.subTree=Wn(zn);w(null,t,e,n)}}else V(s,t,e,n,o,i,a)},T=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:o,component:i}=t,{props:a,children:s,patchFlag:f}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&f>0))return!(!o&&!s||s&&s.$stable)||r!==a&&(r?!a||Ue(r,a,c):!!a);if(1024&f)return!0;if(16&f)return r?Ue(r,a,c):!!a;if(8&f){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(a[n]!==r[n]&&!Oe(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void j(r,e,n);r.next=e,function(t){const e=ae.indexOf(t);e>-1&&(ae[e]=null)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},V=(t,e,n,r,o,i,a)=>{t.update=tt((function(){if(t.isMounted){let e,{next:n,bu:r,u:s,parent:f,vnode:c}=t,l=n;n?(n.el=c.el,j(t,n,a)):n=c,r&&G(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Cn(e,f,n,c);const h=Re(t),d=t.subTree;t.subTree=h,y(d,h,u(d.el),nt(d),t,o,i),n.el=h.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,h.el),s&&wn(s,o),(e=n.props&&n.props.onVnodeUpdated)&&wn(()=>{Cn(e,f,n,c)},o)}else{let a;const{el:s,props:f}=e,{bm:c,m:l,parent:u}=t;c&&G(c),(a=f&&f.onVnodeBeforeMount)&&Cn(a,u,e);const h=t.subTree=Re(t);s&&ft?ft(e.el,h,t,o):(y(null,h,n,r,t,o,i),e.el=h.el),l&&wn(l,o),(a=f&&f.onVnodeMounted)&&wn(()=>{Cn(a,u,e)},o);const{a:d}=t;d&&256&e.shapeFlag&&wn(d,o),t.isMounted=!0}}),xn)},j=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:o,attrs:i,vnode:{patchFlag:a}}=t,s=Qt(o),[f]=t.propsOptions;if(!(r||a>0)||16&a){let r;Ve(t,e,o,i);for(const i in s)e&&(M(e,i)||(r=q(i))!==i&&M(e,r))||(f?!n||void 0===n[i]&&void 0===n[r]||(o[i]=De(f,e||d,i,void 0,t)):delete o[i]);if(i!==s)for(const t in i)e&&M(e,t)||delete i[t]}else if(8&a){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){const a=n[r],c=e[a];if(f)if(M(i,a))i[a]=c;else{const e=D(a);o[e]=De(f,s,e,c,t)}else i[a]=c}}ct(t,"set","$attrs")}(t,e.props,r,n),((t,e)=>{const{vnode:n,slots:r}=t;let o=!0,i=d;if(32&n.shapeFlag){const t=e._;t?1===t?o=!1:b(r,e):(o=!e.$stable,pn(e,r)),i=e}else e&&(vn(t,e),i={default:1});if(o)for(const t in r)un(t)||t in i||delete r[t]})(t,e.children),xe(void 0,t.update)},B=(t,e,n,r,o,i,a,s=!1)=>{const f=t&&t.children,c=t?t.shapeFlag:0,u=e.children,{patchFlag:h,shapeFlag:d}=e;if(h>0){if(128&h)return void $(f,u,n,r,o,i,a,s);if(256&h)return void W(f,u,n,r,o,i,a,s)}8&d?(16&c&&Z(f,o,i),u!==f&&l(n,u)):16&c?16&d?$(f,u,n,r,o,i,a,s):Z(f,o,i,!0):(8&c&&l(n,""),16&d&&A(u,n,r,o,i,a,s))},W=(t,e,n,r,o,i,a,s)=>{e=e||p;const f=(t=t||p).length,c=e.length,l=Math.min(f,c);let u;for(u=0;u<l;u++){const r=e[u]=s?Kn(e[u]):Yn(e[u]);y(t[u],r,n,null,o,i,a,s)}f>c?Z(t,o,i,!0,!1,l):A(e,n,r,o,i,a,s,l)},$=(t,e,n,r,o,i,a,s)=>{let f=0;const c=e.length;let l=t.length-1,u=c-1;for(;f<=l&&f<=u;){const r=t[f],c=e[f]=s?Kn(e[f]):Yn(e[f]);if(!Dn(r,c))break;y(r,c,n,null,o,i,a,s),f++}for(;f<=l&&f<=u;){const r=t[l],f=e[u]=s?Kn(e[u]):Yn(e[u]);if(!Dn(r,f))break;y(r,f,n,null,o,i,a,s),l--,u--}if(f>l){if(f<=u){const t=u+1,l=t<c?e[t].el:r;for(;f<=u;)y(null,e[f]=s?Kn(e[f]):Yn(e[f]),n,l,o,i,a),f++}}else if(f>u)for(;f<=l;)K(t[f],o,i,!0),f++;else{const h=f,d=f,v=new Map;for(f=d;f<=u;f++){const t=e[f]=s?Kn(e[f]):Yn(e[f]);null!=t.key&&v.set(t.key,f)}let _,m=0;const g=u-d+1;let b=!1,x=0;const w=new Array(g);for(f=0;f<g;f++)w[f]=0;for(f=h;f<=l;f++){const r=t[f];if(m>=g){K(r,o,i,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(_=d;_<=u;_++)if(0===w[_-d]&&Dn(r,e[_])){c=_;break}void 0===c?K(r,o,i,!0):(w[c-d]=f+1,c>=x?x=c:b=!0,y(r,e[c],n,null,o,i,a,s),m++)}const M=b?function(t){const e=t.slice(),n=[0];let r,o,i,a,s;const f=t.length;for(r=0;r<f;r++){const f=t[r];if(0!==f){if(o=n[n.length-1],t[o]<f){e[r]=o,n.push(r);continue}for(i=0,a=n.length-1;i<a;)s=(i+a)/2|0,t[n[s]]<f?i=s+1:a=s;f<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}i=n.length,a=n[i-1];for(;i-- >0;)n[i]=a,a=e[a];return n}(w):p;for(_=M.length-1,f=g-1;f>=0;f--){const t=d+f,s=e[t],l=t+1<c?e[t+1].el:r;0===w[f]?y(null,s,n,l,o,i,a):b&&(_<0||f!==M[_]?Y(s,n,l,2):_--)}}},Y=(t,e,r,o,i=null)=>{const{el:a,type:s,transition:f,children:c,shapeFlag:l}=t;if(6&l)return void Y(t.component.subTree,e,r,o);if(128&l)return void t.suspense.move(e,r,o);if(64&l)return void s.move(t,e,r,ot);if(s===Rn){n(a,e,r);for(let t=0;t<c.length;t++)Y(c[t],e,r,o);return void n(t.anchor,e,r)}if(2!==o&&1&l&&f)if(0===o)f.beforeEnter(a),n(a,e,r),wn(()=>f.enter(a),i);else{const{leave:t,delayLeave:o,afterLeave:i}=f,s=()=>n(a,e,r),c=()=>{t(a,()=>{s(),i&&i()})};o?o(a,s,c):c()}else n(a,e,r)},K=(t,e,n,r=!1,o=!1)=>{const{type:i,props:a,ref:s,children:f,dynamicChildren:c,shapeFlag:l,patchFlag:u,dirs:h}=t;if(null!=s&&e&&Mn(s,null,e,n,null),256&l)return void e.ctx.deactivate(t);const d=1&l&&h;let p;if((p=a&&a.onVnodeBeforeUnmount)&&Cn(p,e,t),6&l)X(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);d&&mn(t,null,e,"beforeUnmount"),c&&(i!==Rn||u>0&&64&u)?Z(c,e,n,!1,!0):(i===Rn&&(128&u||256&u)||!o&&16&l)&&Z(f,e,n),64&l&&(r||!Sn(t.props))&&t.type.remove(t,ot),r&&J(t)}((p=a&&a.onVnodeUnmounted)||d)&&wn(()=>{p&&Cn(p,e,t),d&&mn(t,null,e,"unmounted")},n)},J=t=>{const{type:e,el:n,anchor:o,transition:i}=t;if(e===Rn)return void Q(n,o);const a=()=>{r(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,o=()=>e(n,a);r?r(t.el,a,o):o()}else a()},Q=(t,e)=>{let n;for(;t!==e;)n=h(t),r(t),t=n;r(e)},X=(t,e,n)=>{const{bum:r,effects:o,update:i,subTree:a,um:s}=t;if(r&&G(r),o)for(let t=0;t<o.length;t++)et(o[t]);i&&(et(i),K(a,t,e,n)),s&&wn(s,e),wn(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Z=(t,e,n,r=!1,o=!1,i=0)=>{for(let a=i;a<t.length;a++)K(t[a],e,n,r,o)},nt=t=>6&t.shapeFlag?nt(t.component.subTree):128&t.shapeFlag?t.suspense.next():h(t.anchor||t.el),rt=(t,e)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):y(e._vnode||null,t,e),we(),e._vnode=t},ot={p:y,um:K,m:Y,r:J,mt:P,mc:A,pc:B,pbc:F,n:nt,o:t};let it,ft;e&&([it,ft]=e(ot));return{render:rt,hydrate:it,createApp:bn(rt,it)}}(t)}function Cn(t,e,n,r=null){ne(t,e,7,[n,r])}const Sn=t=>t&&(t.disabled||""===t.disabled);function On(t){return function(t,e,n=!0){const r=Ee||hr;if(r){const n=r.type;if("components"===t){const t=n.displayName||n.name;if(t&&(t===e||t===D(e)||t===B(D(e))))return n}return An(r[t]||n[t],e)||An(r.appContext[t],e)}}("components",t)||t}const En=Symbol();function An(t,e){return t&&(t[e]||t[D(e)]||t[B(D(e))])}const Rn=Symbol(void 0),Fn=Symbol(void 0),zn=Symbol(void 0),Ln=Symbol(void 0),Un=[];let In=null;function Pn(t=!1){Un.push(In=t?null:[])}function Nn(){Un.pop(),In=Un[Un.length-1]||null}function Tn(t,e,n,r,o){const i=Wn(t,e,n,r,o,!0);return i.dynamicChildren=In||p,Nn(),In&&In.push(i),i}function Vn(t){return!!t&&!0===t.__v_isVNode}function Dn(t,e){return t.type===e.type&&t.key===e.key}const jn="__vInternal",qn=({key:t})=>null!=t?t:null,Bn=({ref:t})=>null!=t?k(t)?t:{i:Ee,r:t}:null,Wn=function(t,e=null,n=null,r=0,o=null,a=!1){t&&t!==En||(t=zn);if(Vn(t)){const r=$n(t,e,!0);return n&&Jn(r,n),r}s=t,E(s)&&"__vccOpts"in s&&(t=t.__vccOpts);var s;if(e){(Jt(e)||jn in e)&&(e=b({},e));let{class:t,style:n}=e;t&&!A(t)&&(e.class=c(t)),F(n)&&(Jt(n)&&!k(n)&&(n=b({},n)),e.style=i(n))}const f=A(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:F(t)?4:E(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qn(e),ref:e&&Bn(e),scopeId:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};if(Jn(l,n),128&f){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let r,o;return 32&e?(r=Ie(n.default),o=Ie(n.fallback)):(r=Ie(n),o=Yn(null)),{content:r,fallback:o}}(l);l.ssContent=t,l.ssFallback=e}!a&&In&&(r>0||6&f)&&32!==r&&In.push(l);return l};function $n(t,e,n=!1){const{props:r,ref:o,patchFlag:a}=t,s=e?function(...t){const e=b({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=c([e.class,r.class]));else if("style"===t)e.style=i([e.style,r.style]);else if(g(t)){const n=e[t],o=r[t];n!==o&&(e[t]=n?[].concat(n,r[t]):o)}else""!==t&&(e[t]=r[t])}return e}(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&qn(s),ref:e&&e.ref?n&&o?k(o)?o.concat(Bn(e)):[o,Bn(e)]:Bn(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Rn?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$n(t.ssContent),ssFallback:t.ssFallback&&$n(t.ssFallback),el:t.el,anchor:t.anchor}}function Gn(t=" ",e=0){return Wn(Fn,null,t,e)}function Hn(t="",e=!1){return e?(Pn(),Tn(zn,null,t)):Wn(zn,null,t)}function Yn(t){return null==t||"boolean"==typeof t?Wn(zn):k(t)?Wn(Rn,null,t):"object"==typeof t?null===t.el?t:$n(t):Wn(Fn,null,String(t))}function Kn(t){return null===t.el?t:$n(t)}function Jn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(k(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&Ne(1),Jn(t,n()),n._c&&Ne(-1)))}{n=32;const r=e._;r||jn in e?3===r&&Ee&&(1024&Ee.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=Ee}}else E(e)?(e={default:e,_ctx:Ee},n=32):(e=String(e),64&r?(n=16,e=[Gn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Qn(t,e){if(hr){let n=hr.provides;const r=hr.parent&&hr.parent.provides;r===n&&(n=hr.provides=Object.create(r)),n[t]=e}else;}function Xn(t,e,n=!1){const r=hr||Ee;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&E(e)?e():e}}let Zn=!1;function tr(t,e,n=[],r=[],o=[],i=!1){const{mixins:a,extends:s,data:f,computed:c,methods:l,watch:u,provide:h,inject:d,components:p,directives:_,beforeMount:m,mounted:g,beforeUpdate:y,updated:x,activated:w,deactivated:M,beforeDestroy:C,beforeUnmount:S,destroyed:O,unmounted:A,render:R,renderTracked:z,renderTriggered:L,errorCaptured:U}=e,I=t.proxy,P=t.ctx,N=t.appContext.mixins;if(i&&R&&t.render===v&&(t.render=R),i||(Zn=!0,er("beforeCreate","bc",e,t,N),Zn=!1,rr(t,N,n,r,o)),s&&tr(t,s,n,r,o,!0),a&&rr(t,a,n,r,o),d)if(k(d))for(let t=0;t<d.length;t++){const e=d[t];P[e]=Xn(e)}else for(const t in d){const e=d[t];F(e)?P[t]=Xn(e.from||t,e.default,!0):P[t]=Xn(e)}if(l)for(const t in l){const e=l[t];E(e)&&(P[t]=e.bind(I))}if(i?f&&n.push(f):(n.length&&n.forEach(e=>or(t,e,I)),f&&or(t,f,I)),c)for(const t in c){const e=c[t],n=gr({get:E(e)?e.bind(I,I):E(e.get)?e.get.bind(I,I):v,set:!E(e)&&E(e.set)?e.set.bind(I):v});Object.defineProperty(P,t,{enumerable:!0,configurable:!0,get:()=>n.value,set:t=>n.value=t})}var T;u&&r.push(u),!i&&r.length&&r.forEach(t=>{for(const e in t)ir(t[e],P,I,e)}),h&&o.push(h),!i&&o.length&&o.forEach(t=>{const e=E(t)?t.call(I):t;for(const t in e)Qn(t,e[t])}),i&&(p&&b(t.components||(t.components=b({},t.type.components)),p),_&&b(t.directives||(t.directives=b({},t.type.directives)),_)),i||er("created","c",e,t,N),m&&Ye(m.bind(I)),g&&Ke(g.bind(I)),y&&Je(y.bind(I)),x&&Qe(x.bind(I)),w&&cn(w.bind(I),"a",T),M&&function(t,e){cn(t,"da",e)}(M.bind(I)),U&&((t,e=hr)=>{Ge("ec",t,e)})(U.bind(I)),z&&en(z.bind(I)),L&&tn(L.bind(I)),S&&Xe(S.bind(I)),A&&Ze(A.bind(I))}function er(t,e,n,r,o){nr(t,e,o,r);const{extends:i,mixins:a}=n;i&&function t(e,n,r,o){r.extends&&t(e,n,r.extends,o);const i=r[e];i&&ne(i.bind(o.proxy),o,n)}(t,e,i,r),a&&nr(t,e,a,r);const s=n[t];s&&ne(s.bind(r.proxy),r,e)}function nr(t,e,n,r){for(let o=0;o<n.length;o++){const i=n[o].mixins;i&&nr(t,e,i,r);const a=n[o][t];a&&ne(a.bind(r.proxy),r,e)}}function rr(t,e,n,r,o){for(let i=0;i<e.length;i++)tr(t,e[i],n,r,o,!0)}function or(t,e,n){const r=e.call(n,n);F(r)&&(t.data===d?t.data=$t(r):b(t.data,r))}function ir(t,e,n,r){const o=r.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,r):()=>n[r];if(A(t)){const n=e[t];E(n)&&rn(o,n)}else if(E(t))rn(o,t.bind(n));else if(F(t))if(k(t))t.forEach(t=>ir(t,e,n,r));else{const r=E(t.handler)?t.handler.bind(n):e[t.handler];E(r)&&rn(o,r,t)}}function ar(t,e,n){const r=n.appContext.config.optionMergeStrategies,{mixins:o,extends:i}=e;i&&ar(t,i,n),o&&o.forEach(e=>ar(t,e,n));for(const o in e)r&&M(r,o)?t[o]=r[o](t[o],e[o],n.proxy,o):t[o]=e[o]}const sr=b(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>t.parent&&t.parent.proxy,$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:r,extends:o}=e;if(n)return n;const i=t.appContext.mixins;if(!i.length&&!r&&!o)return e;const a={};return i.forEach(e=>ar(a,e,t)),ar(a,e,t),e.__merged=a}(t),$forceUpdate:t=>()=>ge(t.update),$nextTick:t=>me.bind(t.proxy),$watch:t=>an.bind(t)}),fr={get({_:t},e){const{ctx:n,setupState:r,data:o,props:i,accessCache:a,type:s,appContext:f}=t;if("__v_skip"===e)return!0;let c;if("$"!==e[0]){const s=a[e];if(void 0!==s)switch(s){case 0:return r[e];case 1:return o[e];case 3:return n[e];case 2:return i[e]}else{if(r!==d&&M(r,e))return a[e]=0,r[e];if(o!==d&&M(o,e))return a[e]=1,o[e];if((c=t.propsOptions[0])&&M(c,e))return a[e]=2,i[e];if(n!==d&&M(n,e))return a[e]=3,n[e];Zn||(a[e]=4)}}const l=sr[e];let u,h;return l?("$attrs"===e&&ft(t,0,e),l(t)):(u=s.__cssModules)&&(u=u[e])?u:n!==d&&M(n,e)?(a[e]=3,n[e]):(h=f.config.globalProperties,M(h,e)?h[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:i}=t;if(o!==d&&M(o,e))o[e]=n;else if(r!==d&&M(r,e))r[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:i}},a){let s;return void 0!==n[a]||t!==d&&M(t,a)||e!==d&&M(e,a)||(s=i[0])&&M(s,a)||M(r,a)||M(sr,a)||M(o.config.globalProperties,a)}},cr=b({},fr,{get(t,e){if(e!==Symbol.unscopables)return fr.get(t,e,t)},has:(t,e)=>"_"!==e[0]&&!r(e)}),lr=gn();let ur=0;let hr=null;const dr=t=>{hr=t};let pr=!1;function vr(t,e,n){var r;E(e)?t.render=e:F(e)&&(t.setupState=Yt(r=e)?r:new Proxy(r,Zt)),_r(t)}function _r(t,e){const n=t.type;t.render||(t.render=n.render||v,t.render._rc&&(t.withProxy=new Proxy(t.ctx,cr))),hr=t,tr(t,n),hr=null}function mr(t){hr&&(hr.effects||(hr.effects=[])).push(t)}function gr(t){const e=function(t){let e,n;return E(t)?(e=t,n=v):(e=t.get,n=t.set),new te(e,n,E(t)||!t.set)}(t);return mr(e.effect),e}const yr="3.0.2",br="http://www.w3.org/2000/svg",xr="undefined"!=typeof document?document:null;let wr,Mr;const kr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?xr.createElementNS(br,t):xr.createElement(t,n?{is:n}:void 0),createText:t=>xr.createTextNode(t),createComment:t=>xr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,r){const o=r?Mr||(Mr=xr.createElementNS(br,"svg")):wr||(wr=xr.createElement("div"));o.innerHTML=t;const i=o.firstChild;let a=i,s=a;for(;a;)s=a,kr.insert(a,e,n),a=o.firstChild;return[i,s]}};const Cr=/\s*!important$/;function Sr(t,e,n){if(k(n))n.forEach(n=>Sr(t,e,n));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Er[e];if(n)return n;let r=D(e);if("filter"!==r&&r in t)return Er[e]=r;r=B(r);for(let n=0;n<Or.length;n++){const o=Or[n]+r;if(o in t)return Er[e]=o}return e}(t,e);Cr.test(n)?t.setProperty(q(r),n.replace(Cr,""),"important"):t[r]=n}}const Or=["Webkit","Moz","ms"],Er={};const Ar="http://www.w3.org/1999/xlink";let Rr=Date.now;"undefined"!=typeof document&&Rr()>document.createEvent("Event").timeStamp&&(Rr=()=>performance.now());let Fr=0;const zr=Promise.resolve(),Lr=()=>{Fr=0};function Ur(t,e,n,r){t.addEventListener(e,n,r)}function Ir(t,e,n,r,o=null){const i=t._vei||(t._vei={}),a=i[e];if(r&&a)a.value=r;else{const[n,s]=function(t){let e;if(Pr.test(t)){let n;for(e={};n=t.match(Pr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(r){Ur(t,n,i[e]=function(t,e){const n=t=>{(t.timeStamp||Rr())>=n.attached-1&&ne(function(t,e){if(k(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Fr||(zr.then(Lr),Fr=Rr()))(),n}(r,o),s)}else a&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,a,s),i[e]=void 0)}}const Pr=/(?:Once|Passive|Capture)$/;const Nr=/^on[a-z]/;const Tr=t=>{const e=t.props["onUpdate:modelValue"];return k(e)?t=>G(e,t):e},Vr={created(t,{value:e},n){t.checked=l(e,n.props.value),t._assign=Tr(n),Ur(t,"change",()=>{t._assign(function(t){return"_value"in t?t._value:t.value}(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=Tr(r),e!==n&&(t.checked=l(e,r.props.value))}};const Dr=b({patchProp:(t,e,n,r,i=!1,a,s,f,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,r,i);break;case"style":!function(t,e,n){const r=t.style;if(n)if(A(n))e!==n&&(r.cssText=n);else{for(const t in n)Sr(r,t,n[t]);if(e&&!A(e))for(const t in e)null==n[t]&&Sr(r,t,"")}else t.removeAttribute("style")}(t,n,r);break;default:g(e)?y(e)||Ir(t,e,0,r,s):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&Nr.test(e)&&E(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(Nr.test(e)&&A(n))return!1;return e in t}(t,e,r,i)?function(t,e,n,r,o,i,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,o,i),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName)if(""===n&&"boolean"==typeof t[e])t[e]=!0;else if(null==n&&"string"==typeof t[e])t[e]="",t.removeAttribute(e);else try{t[e]=n}catch(t){}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,r,a,s,f,c):("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),function(t,e,n,r){if(r&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(Ar,e.slice(6,e.length)):t.setAttributeNS(Ar,e,n);else{const r=o(e);null==n||r&&!1===n?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}(t,e,r,i))}},forcePatchProp:(t,e)=>"value"===e},kr);let jr;var qr="./ASSETS/boy.5561e955.png",Br="./ASSETS/boy1.56e79012.png",Wr="./ASSETS/boy2.56f5a793.png",$r="./ASSETS/boy3.5703bf14.png";let Gr=null;var Hr={name:"Index",data:()=>({video:null,canvas:null,file:null,videoSrc:"",fileName:"",size:0,gif:null,gifUrl:"",config:{frame:8,quality:10},loading:!1,initUrl:qr}),computed:{expectDelay(){return 1e3/this.config.frame}},methods:{fileChange(t){this.videoSrc=URL.createObjectURL(t.target.files[0]),this.fileName=t.target.files[0].name,this.size=Math.round(t.target.files[0].size/1024)},playVideo(){this.videoSrc&&(this.initGif(),this.loading=!0,this.video.play())},play(){this.renderVideo()},ended(){clearInterval(Gr);try{this.gif.render()}catch(t){this.loading=!1,console.log(t)}},renderVideo(){let t=(new Date).getTime(),e=(new Date).getTime(),n=0;this.fnCannyEdge(this.video,this.canvas),this.add2gif(),Gr=setInterval(()=>{t=(new Date).getTime(),this.fnCannyEdge(this.video,this.canvas),this.add2gif(),e=(new Date).getTime(),n=e-t,console.log(this.expectDelay>n?this.expectDelay-n:0)},this.expectDelay>n?this.expectDelay-n:0)},add2gif(){const t=new Image;t.src=this.canvas.toDataURL("image/png"),t.width=this.canvas.width,t.height=this.canvas.height,this.gif.addFrame(t,{delay:1e3/this.config.frame})},initGif(){this.gif=new GIF({workers:4,quality:this.config.quality,workerScript:"./gif.worker.js"}),this.gif.on("finished",t=>{this.gifUrl=URL.createObjectURL(t),this.loading=!1,this.gif=null})},fnCannyEdge(t,e,n){const r=(n=n||{}).blurRadius||2,o=n.lowThreshold||20,i=n.highThreshold||50,a=t.naturalWidth||t.width||t.videoWidth,s=t.naturalHeight||t.height||t.videoHeight;let f=a,c=s;a>400&&(f=400,c=Math.round(s*f/a));const l=e.getContext("2d");e.width=t.width=f,e.height=t.height=c,l.clearRect(0,0,f,c),l.drawImage(t,0,0,f,c);const u=l.getImageData(0,0,f,c),h=new jsfeat.matrix_t(f,c,jsfeat.U8C1_t);jsfeat.imgproc.grayscale(u.data,f,c,h);const d=2*(r+1);jsfeat.imgproc.gaussian_blur(h,h,d,0),jsfeat.imgproc.canny(h,h,o,i);const p=new Uint32Array(u.data.buffer);let v=h.cols*h.rows,_=0;for(;--v>=0;)_=255-h.data[v],p[v]=255<<24|_<<16|_<<8|_;l.putImageData(u,0,0)},preloadImgs(){[qr,Br,Wr,$r].forEach(t=>{(new Image).src=t})}},mounted(){this.video=this.$refs.video,this.canvas=this.$refs.canvas,this.file=this.$refs.file,this.preloadImgs(),console.log("production")}};const Yr={class:"wrapper"},Kr=Wn("header",null,"线稿 GIF 生成器",-1),Jr={class:"content"},Qr={ref:"canvas"},Xr={class:"controls"},Zr={class:"btn-group"},to=Wn("label",{class:"btn-upload",for:"file"},"选择视频",-1),eo={key:0,class:"btn-transform"},no={class:"config"},ro=Wn("span",null,"选择帧率：",-1),oo=Wn("label",{for:"frame8"},"8帧",-1),io=Wn("label",{for:"frame16"},"16帧",-1),ao=Wn("label",{for:"frame32"},"24帧",-1),so={key:0,class:"file-name"},fo={key:1},co=Wn("p",{class:"tips"},"点击图片下载",-1);Hr.render=function(t,e,n,r,o,i){return Pn(),Tn("div",Yr,[Kr,Wn("div",Jr,[Wn("video",{ref:"video",src:o.videoSrc,onPlay:e[1]||(e[1]=(...t)=>i.play(...t)),onEnded:e[2]||(e[2]=(...t)=>i.ended(...t)),controls:"",muted:""},null,40,["src"]),Wn("canvas",Qr,null,512),Wn("div",Xr,[Wn("div",Zr,[to,Wn("input",{id:"file",type:"file",accept:"video/*",onChange:e[3]||(e[3]=(...t)=>i.fileChange(...t)),ref:"file"},null,544),o.loading?(Pn(),Tn("div",eo,"正在生成...")):(Pn(),Tn("div",{key:1,class:"btn-transform",onClick:e[4]||(e[4]=(...t)=>i.playVideo(...t))},"开始"))]),Wn("div",no,[ro,_n(Wn("input",{id:"frame8",type:"radio",name:"frame",value:"8","onUpdate:modelValue":e[5]||(e[5]=t=>o.config.frame=t)},null,512),[[Vr,o.config.frame]]),oo,_n(Wn("input",{id:"frame16",type:"radio",name:"frame",value:"16","onUpdate:modelValue":e[6]||(e[6]=t=>o.config.frame=t)},null,512),[[Vr,o.config.frame]]),io,_n(Wn("input",{id:"frame32",type:"radio",name:"frame",value:"24","onUpdate:modelValue":e[7]||(e[7]=t=>o.config.frame=t)},null,512),[[Vr,o.config.frame]]),ao])]),o.fileName?(Pn(),Tn("p",so,"已选："+u(o.fileName)+"， 大小："+u(o.size)+"kb",1)):Hn("v-if",!0),o.gifUrl&&!o.loading?(Pn(),Tn("div",fo,[co,Wn("a",{href:o.gifUrl,target:"_blank"},[Wn("img",{class:"result-gif",src:o.gifUrl},null,8,["src"])],8,["href"])])):(Pn(),Tn("div",{key:2,class:["boy",{snoring:o.loading}]},null,2))])])},Hr.__file="src/components/Index.vue";var lo={name:"App",components:{Index:Hr}};lo.render=function(t,e,n,r,o,i){const a=On("index");return Pn(),Tn(a)},lo.__file="src/App.vue",((...t)=>{const e=(jr||(jr=kn(Dr))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(A(t)){return document.querySelector(t)}return t}(t);if(!r)return;const o=e._component;E(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const i=n(r);return r.removeAttribute("v-cloak"),r.setAttribute("data-v-app",""),i},e})(lo).mount("#app");
